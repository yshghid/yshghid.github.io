<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="FastAPI #1 MariaDB, DB Migration, Swagger UI # #2025-09-17
1. 실습 내용 # #1 maria db container 띄우기
# 1. conda 가상환경 생성 $ conda create -n demo-app python=3.11 $ conda activate demo-app # 2. 작업 위치 # mariadb_tmplt 디렉토리를 다운받고 압축 해제함 $ pwd /Users/yshmbid/Documents/home/github/MLops/mariadb_tmplt $ ls conf.d data env maria_db.yaml # 3. Docker Compose로 MariaDB 실행 $ docker compose -p maria_db -f maria_db.yaml up -d # 4. 컨테이너가 잘떴는지확인 $ docker ps | grep mariadb ae333f330cc4 mariadb:10.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/study/sw/sw33/">
  <meta property="og:site_name" content=" ">
  <meta property="og:title" content="FastAPI #1 MariaDB, DB Migration, Swagger UI">
  <meta property="og:description" content="FastAPI #1 MariaDB, DB Migration, Swagger UI # #2025-09-17
1. 실습 내용 # #1 maria db container 띄우기
# 1. conda 가상환경 생성 $ conda create -n demo-app python=3.11 $ conda activate demo-app # 2. 작업 위치 # mariadb_tmplt 디렉토리를 다운받고 압축 해제함 $ pwd /Users/yshmbid/Documents/home/github/MLops/mariadb_tmplt $ ls conf.d data env maria_db.yaml # 3. Docker Compose로 MariaDB 실행 $ docker compose -p maria_db -f maria_db.yaml up -d # 4. 컨테이너가 잘떴는지확인 $ docker ps | grep mariadb ae333f330cc4 mariadb:10.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2025-09-17T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-09-17T00:00:00+00:00">
    <meta property="article:tag" content="2025-09">
<title>FastAPI #1 MariaDB, DB Migration, Swagger UI |  </title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="http://localhost:1313/docs/study/sw/sw33/">
<link rel="stylesheet" href="/book.min.30a7836b6a89342da3b88e7afd1036166aeced16c8de12df060ded2031837886.css" integrity="sha256-MKeDa2qJNC2juI56/RA2Fmrs7RbI3hLfBg3tIDGDeIY=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.b763ebe97235d28e8a4372b7aa56e7a95552ac16dbb42577d9339d156cb83bf7.js" integrity="sha256-t2Pr6XI10o6KQ3K3qlbnqVVSrBbbtCV32TOdFWy4O/c=" crossorigin="anonymous"></script>

  

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><img src="/logo.png" alt="Logo" class="book-icon" /><span> </span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>기록</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/hobby/daily/" class="">일상</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/hobby/book/" class="">글</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>공부</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/study/bioinformatics/" class="">Bioinformatics</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/study/ai/" class="">AI</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/study/sw/" class="">SW</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/study/algorithm/" class="">알고리즘</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/study/career/" class="">취업</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>














</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <h3>FastAPI #1 MariaDB, DB Migration, Swagger UI</h3>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-실습-내용">1. 실습 내용</a></li>
        <li><a href="#heading"></a></li>
        <li><a href="#heading-1"></a></li>
        <li><a href="#heading-2"></a></li>
        <li><a href="#heading-3"></a></li>
        <li><a href="#heading-4"></a></li>
        <li><a href="#heading-5"></a></li>
        <li><a href="#heading-6"></a></li>
        <li><a href="#2-개념">2. 개념</a></li>
        <li><a href="#heading-7"></a></li>
        <li><a href="#heading-8"></a></li>
        <li><a href="#heading-9"></a></li>
      </ul>
    </li>
    <li><a href="#답5">답5</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="fastapi-1-mariadb-db-migration-swagger-ui">
  FastAPI #1 MariaDB, DB Migration, Swagger UI
  <a class="anchor" href="#fastapi-1-mariadb-db-migration-swagger-ui">#</a>
</h1>
<p>#2025-09-17</p>
<hr>
<h3 id="1-실습-내용">
  1. 실습 내용
  <a class="anchor" href="#1-%ec%8b%a4%ec%8a%b5-%eb%82%b4%ec%9a%a9">#</a>
</h3>
<p><mark>#1 maria db container 띄우기</mark></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 1. conda 가상환경 생성</span>
</span></span><span style="display:flex;"><span>$ conda create -n demo-app python<span style="color:#f92672">=</span>3.11
</span></span><span style="display:flex;"><span>$ conda activate demo-app
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. 작업 위치</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># mariadb_tmplt 디렉토리를 다운받고 압축 해제함</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/Users/yshmbid/Documents/home/github/MLops/mariadb_tmplt
</span></span><span style="display:flex;"><span>$ ls
</span></span><span style="display:flex;"><span>conf.d          data            env             maria_db.yaml
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. Docker Compose로 MariaDB 실행</span>
</span></span><span style="display:flex;"><span>$ docker compose -p maria_db -f maria_db.yaml up -d
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. 컨테이너가 잘떴는지확인</span>
</span></span><span style="display:flex;"><span>$ docker ps | grep mariadb
</span></span><span style="display:flex;"><span>ae333f330cc4   mariadb:10.5.18     <span style="color:#e6db74">&#34;docker-entrypoint.s…&#34;</span>   <span style="color:#ae81ff">4</span> minutes ago   Up <span style="color:#ae81ff">4</span> minutes   0.0.0.0:3379-&gt;3306/tcp           maria_db-sqldb-1
</span></span></code></pre></div><ul>
<li>docker desktop에서도 확인</li>
</ul>
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/e187b804-476e-4939-b271-966cc2035c40" />
<h3 id="heading">
  
  <a class="anchor" href="#heading">#</a>
</h3>
<p><mark>#2 db connection</mark></p>
<ul>
<li>vscode에서 database client extension 열고 create connection</li>
</ul>
<img width="3360" height="2100" alt="image" src="https://github.com/user-attachments/assets/df73acd3-1e4a-476b-b1a3-bc60a35dddaf" />
<h3 id="heading-1">
  
  <a class="anchor" href="#heading-1">#</a>
</h3>
<p><mark>cf) 컨테이너 기반 실습 환경을 구성하는 이유와 장점</mark></p>
<ul>
<li>컨테이너 기반 실습 환경을 구성하는 이유
<ul>
<li>목적1: 모두가 똑같은 환경에서 실습을 하기 위해
<ul>
<li>내부에서 설치된 라이브러리 버전이나 운영체제 차이 때문에 동일한 python-app.py를 실행해도 실행이안대거나 오류가날수있다.</li>
<li>Docker 컨테이너라는 상자 안에 Python 실행 환경을 일정하게 담아두고 Mac이든 Windows든 그 상자를 똑같이 실행시키면 누구든 동일한 환경에서 같은 결과를 낼수있으니까 환경 차이로 인한 오류가 없어진다</li>
</ul>
</li>
<li>목적2: 작업 환경을 제한
<ul>
<li>단순히 Python 코드만 실행하는 것이 아니라 데이터베이스(DBMS)까지 연결해야 할 때가 많은데 오픈소스 데이터베이스인 MySQL이나 MariaDB 같은 프로그램을 직접 로컬에 설치할 수도 있지만 얘네는 운영체제에 따라 설치 과정이 복잡하고 하드웨어 자원에 의존적이라 충돌이나 오류가 발생하기 쉬운프로그램들이다.</li>
<li>Docker 컨테이너를 사용하면 데이터베이스를 별도의 격리된 공간에서 실행할 수 있다. FastAPI를 실행하는 컨테이너 하나, MySQL을 실행하는 컨테이너 하나를 띄워두고, 이 둘을 내부 네트워크로 연결해주는 식으로 작업하면 데이터베이스나 Python 실행 환경이 호스트 컴퓨터 전체를 더럽히지 않고, 필요 없을 때 컨테이너만 지우면 깨끗하게 정리된다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="heading-2">
  
  <a class="anchor" href="#heading-2">#</a>
</h3>
<p><mark>#3</mark></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 5. 필요 패키지 설치</span>
</span></span><span style="display:flex;"><span>pip install fastapi <span style="color:#e6db74">&#34;uvicorn[standard]&#34;</span>
</span></span><span style="display:flex;"><span>pip install -r pjt-requirements.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 6. 실행 위치</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/Users/yshmbid/Documents/home/github/MLops/skala-fastapi-rpt
</span></span><span style="display:flex;"><span>$ ls
</span></span><span style="display:flex;"><span>api                     container               pjt-main.py             pjt-requirements.txt    test-requirements.txt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 7. uvicorn 실행</span>
</span></span><span style="display:flex;"><span>$ uvicorn api.main:app --host 127.0.0.1 --port <span style="color:#ae81ff">8001</span> --reload
</span></span><span style="display:flex;"><span>INFO:     Will watch <span style="color:#66d9ef">for</span> changes in these directories: <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;/Users/yshmbid/Documents/home/github/MLops/skala-fastapi-rpt&#39;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>INFO:     Uvicorn running on http://127.0.0.1:8001 <span style="color:#f92672">(</span>Press CTRL+C to quit<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>INFO:     Started reloader process <span style="color:#f92672">[</span>84071<span style="color:#f92672">]</span> using WatchFiles
</span></span><span style="display:flex;"><span>INFO:     Started server process <span style="color:#f92672">[</span>84076<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>INFO:     Waiting <span style="color:#66d9ef">for</span> application startup.
</span></span><span style="display:flex;"><span>INFO:     Application startup complete.
</span></span></code></pre></div><ul>
<li>uvicorn
<ul>
<li>uvicorn을 실행해 fastapi 앱을 실행한다.</li>
<li>api 서버가 실행되면 브라우저에서 127.0.0.1:8001로 접속하면 서버가 응답을 돌려줄수있다.</li>
</ul>
</li>
<li>swagger ui
<ul>
<li>api를만들면 기능이 코드안에 가려져있어서 어떤 요청을 보내야 하고 어떤 응답이 돌아오는지 알기 어려운데</li>
<li>swagger ui가 있으면 내가만든 fast api 서버가 swagger ui를 통해 “이런 엔드포인트들이 있습니다, 이런 식으로 요청을 보내면 되고, 이런 응답이 옵니다”를 자동으로 보여준다.</li>
<li>ui 화면에서 실제 api 요청도 보낼수있다.</li>
</ul>
</li>
</ul>
<h3 id="heading-3">
  
  <a class="anchor" href="#heading-3">#</a>
</h3>
<p><mark>#4</mark></p>
<ul>
<li>routers/task_a.py → done_crud 임포트 및 done 여부 확인 부분 수정</li>
<li>routers/done_a.py → DoneResponse 반환 시 done 필드 제거</li>
<li>cruds/task_a.py → get_tasks_with_done, update_task에서 Done 여부 올바르게 체크</li>
<li>schemas/task_a.py → done 필드 반드시 포함</li>
<li>schemas/done_a.py → DoneResponse 정의 필요 (예: class DoneResponse(BaseModel): id: int)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 8. 실행위치</span>
</span></span><span style="display:flex;"><span>$ pwd
</span></span><span style="display:flex;"><span>/Users/yshmbid/Documents/home/github/MLops/skala-fastapi-rpt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 9. DB 마이그레이션 실행</span>
</span></span><span style="display:flex;"><span>$ python -m api.migrate_db_a
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,735 INFO sqlalchemy.engine.Engine SELECT DATABASE<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,736 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,740 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,740 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,741 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,741 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,745 INFO sqlalchemy.engine.Engine BEGIN <span style="color:#f92672">(</span>implicit<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,745 INFO sqlalchemy.engine.Engine DESCRIBE <span style="color:#e6db74">`</span>demo<span style="color:#e6db74">`</span>.<span style="color:#e6db74">`</span>tasks<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,745 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,772 INFO sqlalchemy.engine.Engine DESCRIBE <span style="color:#e6db74">`</span>demo<span style="color:#e6db74">`</span>.<span style="color:#e6db74">`</span>dones<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,772 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,780 INFO sqlalchemy.engine.Engine DESCRIBE <span style="color:#e6db74">`</span>demo<span style="color:#e6db74">`</span>.<span style="color:#e6db74">`</span>tasks<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,780 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,785 INFO sqlalchemy.engine.Engine DESCRIBE <span style="color:#e6db74">`</span>demo<span style="color:#e6db74">`</span>.<span style="color:#e6db74">`</span>dones<span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,785 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,792 INFO sqlalchemy.engine.Engine 
</span></span><span style="display:flex;"><span>CREATE TABLE tasks <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>        id INTEGER NOT NULL AUTO_INCREMENT, 
</span></span><span style="display:flex;"><span>        title VARCHAR<span style="color:#f92672">(</span>1024<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>        PRIMARY KEY <span style="color:#f92672">(</span>id<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,792 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>no key 0.00017s<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,811 INFO sqlalchemy.engine.Engine 
</span></span><span style="display:flex;"><span>CREATE TABLE dones <span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>        id INTEGER NOT NULL, 
</span></span><span style="display:flex;"><span>        PRIMARY KEY <span style="color:#f92672">(</span>id<span style="color:#f92672">)</span>, 
</span></span><span style="display:flex;"><span>        FOREIGN KEY<span style="color:#f92672">(</span>id<span style="color:#f92672">)</span> REFERENCES tasks <span style="color:#f92672">(</span>id<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,811 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>no key 0.00013s<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:08:44,822 INFO sqlalchemy.engine.Engine COMMIT
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 10. fastapi 서버 실행해서 확인</span>
</span></span><span style="display:flex;"><span>$ uvicorn api.main:app --host 127.0.0.1 --port <span style="color:#ae81ff">8001</span> --reload
</span></span><span style="display:flex;"><span>INFO:     Will watch <span style="color:#66d9ef">for</span> changes in these directories: <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;/Users/yshmbid/Documents/home/github/MLops/skala-fastapi-rpt&#39;</span><span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>INFO:     Uvicorn running on http://127.0.0.1:8001 <span style="color:#f92672">(</span>Press CTRL+C to quit<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>INFO:     Started reloader process <span style="color:#f92672">[</span>13839<span style="color:#f92672">]</span> using WatchFiles
</span></span><span style="display:flex;"><span>INFO:     Started server process <span style="color:#f92672">[</span>13867<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>INFO:     Waiting <span style="color:#66d9ef">for</span> application startup.
</span></span><span style="display:flex;"><span>INFO:     Application startup complete.
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60547 - <span style="color:#e6db74">&#34;GET / HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60547 - <span style="color:#e6db74">&#34;GET /favicon.ico HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60550 - <span style="color:#e6db74">&#34;GET /docs HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60550 - <span style="color:#e6db74">&#34;GET /openapi.json HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60551 - <span style="color:#e6db74">&#34;GET /static/favicon.ico HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,548 INFO sqlalchemy.engine.Engine SELECT DATABASE<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,551 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,554 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,554 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,554 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,554 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>raw sql<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,556 INFO sqlalchemy.engine.Engine BEGIN <span style="color:#f92672">(</span>implicit<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,564 INFO sqlalchemy.engine.Engine SELECT tasks.id, tasks.title, dones.id IS NOT NULL AS <span style="color:#66d9ef">done</span> 
</span></span><span style="display:flex;"><span>FROM tasks LEFT OUTER JOIN dones ON tasks.id <span style="color:#f92672">=</span> dones.id
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,564 INFO sqlalchemy.engine.Engine <span style="color:#f92672">[</span>generated in 0.00024s<span style="color:#f92672">]</span> <span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>2025-09-17 12:10:21,571 INFO sqlalchemy.engine.Engine COMMIT
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>✅ COMMIT 완료<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>INFO:     127.0.0.1:60554 - <span style="color:#e6db74">&#34;GET /tasks HTTP/1.1&#34;</span> <span style="color:#ae81ff">200</span> OK
</span></span></code></pre></div><p><mark>cf2</mark></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> tasks.id, tasks.title, dones.id <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AS</span> done 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> tasks <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">OUTER</span> <span style="color:#66d9ef">JOIN</span> dones <span style="color:#66d9ef">ON</span> tasks.id <span style="color:#f92672">=</span> dones.id
</span></span></code></pre></div><p>SQLAlchemy 로그 해석?</p>
<ul>
<li>tasks와 dones 테이블을 조인해서 각 할 일이 완료되었는지 여부(done)를 계산</li>
<li>FastAPI가 JSON으로 가공해 클라이언트에 반환.</li>
</ul>
<h3 id="heading-4">
  
  <a class="anchor" href="#heading-4">#</a>
</h3>
<p><mark>cf3</mark></p>
<p>swagger ui에서 확인</p>
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/b4249ec5-0d68-497f-a003-1946f622780b" />
<h3 id="heading-5">
  
  <a class="anchor" href="#heading-5">#</a>
</h3>
<p><mark>#5 실습정리</mark></p>
<p>가상환경 만들기?</p>
<ul>
<li>source ./demo-app/bin/activate</li>
<li>나는 어케하는지몰라서 그냥 conda환경만들엇는데 갠찮겠지..</li>
</ul>
<p>필요 패키지 설치</p>
<ul>
<li>pip install fastapi “uvicorn[standard]”</li>
<li>pip install sqlalchemy aiomysql pymysql greenlet</li>
</ul>
<p>PathOperation 함수는 경로동작 함수</p>
<ul>
<li>모듈 임포트하는 모든 경로에, <code>__init__.py</code> 만든다</li>
</ul>
<h3 id="heading-6">
  
  <a class="anchor" href="#heading-6">#</a>
</h3>
<h3 id="2-개념">
  2. 개념
  <a class="anchor" href="#2-%ea%b0%9c%eb%85%90">#</a>
</h3>
<ul>
<li>목적
<ul>
<li>Docker 컨테이너(MariaDB), SQLAlchemy, FastAPI, Uvicorn을 활용해 동일한 데이터베이스 환경에서 FastAPI 서버를 구축하고 Swagger UI를 통해 API 동작을 확인하는 것</li>
</ul>
</li>
</ul>
<h3 id="heading-7">
  
  <a class="anchor" href="#heading-7">#</a>
</h3>
<ul>
<li>구현
<ul>
<li>컨테이너 실행(Docker + MariaDB): Docker Compose를 이용해 MariaDB 컨테이너를 띄우고, 로컬 환경과 독립된 동일한 DB 환경을 구성함</li>
<li>DB 연결(Database Client + SQLAlchemy): VS Code Database Client Extension과 SQLAlchemy를 통해 MariaDB에 연결해 테이블을 조회하고 쿼리를 실행함</li>
<li>FastAPI 서버 실행(Uvicorn + FastAPI): FastAPI 앱을 uvicorn으로 구동하여 API 서버를 실행하고, 로컬 브라우저에서 엔드포인트에 접근 가능하게 함</li>
<li>Swagger UI 확인(Swagger UI): 자동 문서화된 API 명세서를 통해 엔드포인트 구조와 요청/응답을 직관적으로 확인하고 직접 API 요청을 테스트함</li>
<li>DB 마이그레이션(SQLAlchemy ORM): migrate_db_a 모듈을 실행해 tasks/dones 테이블을 자동 생성하고, 조인 쿼리를 통해 완료 여부를 조회하도록 구현함</li>
<li>라우터 및 스키마 수정(FastAPI routers/schemas): routers, cruds, schemas 모듈을 수정하여 done 여부를 올바르게 반영하고 DoneResponse를 정의하여 API 응답 형식을 보장함</li>
</ul>
</li>
</ul>
<h3 id="heading-8">
  
  <a class="anchor" href="#heading-8">#</a>
</h3>
<ul>
<li>의문점1
<ul>
<li>(MariaDB를 로컬 운영체제에 직접 깔지 않고) Docker Compose를 이용해 MariaDB 컨테이너를 띄운 이유?</li>
</ul>
</li>
<li>답1
<ul>
<li>mariadb같은 db를 로컬 환경에 깔려고 하면 운영체제마다 설치 방법도 다르고 버전 호환 문제도 많아서 똑같은 코드를 실행해도 어떤 컴퓨터에서는 잘 되고 다른 컴퓨터에서는 에러가 날수있다.</li>
<li>이때 docker에 mariadb를 세팅된 상태로 담아두고 돌리면 2가지 이점이 있는데
<ul>
<li>맥이든 서버가 리눅스든 상관없이 항상 동일한 MariaDB 환경이 보장되고</li>
<li>삭제할때 컨테이너만 지우면 깨끗하게 정리돼서 추후 호환문제가 발생하는것도 방지할수있다.</li>
</ul>
</li>
</ul>
</li>
<li>의문점2
<ul>
<li>db를 왜 로컬환경에 설치하는가? db가 무엇인가?</li>
</ul>
</li>
<li>답2
<ul>
<li>db는 많은 양의 데이터를 체계적으로 관리하고 동시에 여러 사용자가 빠르게 조회할 수 있도록 도와주는 시스템.</li>
<li>엑셀 파일처럼 몇 줄짜리 데이터만 다룰 거라면 굳이 DB가 필요 없지만
<ul>
<li>웹 서비스나 API 서버를 만든다고 하면?
<ul>
<li>예를 들어 할 일 관리 앱을 만든다고 하면</li>
<li>사용자가 추가한 작업들을 어딘가에 저장해 두었다가 나중에 다시 보여줘야하는데</li>
<li>만약 메모리에만 저장하면 서버가 꺼지는 순간 다 사라지고 파일로 저장하면 여러 사람이 동시에 접속해서 데이터를 읽고 쓰기 시작하면 꼬일수있다 그래서 신뢰성 있게 &ldquo;데이터를 관리&quot;할 수 있는 db가 필요하다!</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>의문점3
<ul>
<li>&ldquo;데이터를 관리&quot;한다란?</li>
</ul>
</li>
<li>답3
<ul>
<li>서비스를 구동하면 데이터가 들어오니까 데이터를 저장하고 조회하고 해야한다.</li>
</ul>
</li>
</ul>
<h3 id="heading-9">
  
  <a class="anchor" href="#heading-9">#</a>
</h3>
<ul>
<li>의문점4
<ul>
<li>VS Code Database Client Extension과 SQLAlchemy가 각각 하는일이 무엇인가?</li>
</ul>
</li>
<li>답4
<ul>
<li>vscode db client extension을 쓰면
<ul>
<li>vs code를 통해서 db에 들어있는 테이블이랑 적재된 데이터를 볼수있고</li>
<li>db에 쿼리문을 입력해서 결과를 볼수있고</li>
<li>구조를 시각적으로 확인할수도있다.</li>
<li>즉 db 상태를 빠르게확인하고 단순한수준의 조작을 할수있다.</li>
</ul>
</li>
<li>sql alchemy를 쓰면
<ul>
<li>파이썬 객체와 데이터베이스 테이블을 연결할수있다.</li>
</ul>
</li>
</ul>
</li>
<li>의문점5
<ul>
<li>SQLAlchemy 의 기본 뼈대 Engine + Base + Session?</li>
</ul>
</li>
<li>
<h2 id="답5">
  답5
  <a class="anchor" href="#%eb%8b%b55">#</a>
</h2>
</li>
</ul>
<h1 id="heading-10">
  
  <a class="anchor" href="#heading-10">#</a>
</h1>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments"><script src="https://giscus.app/client.js"
        data-repo="yshghid/yshghid.github.io"
        data-repo-id="R_kgDONkMkNg"
        data-category-id="DIC_kwDONkMkNs4CloJh"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="ko"
        crossorigin="anonymous"
        async>
</script>
</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-실습-내용">1. 실습 내용</a></li>
        <li><a href="#heading"></a></li>
        <li><a href="#heading-1"></a></li>
        <li><a href="#heading-2"></a></li>
        <li><a href="#heading-3"></a></li>
        <li><a href="#heading-4"></a></li>
        <li><a href="#heading-5"></a></li>
        <li><a href="#heading-6"></a></li>
        <li><a href="#2-개념">2. 개념</a></li>
        <li><a href="#heading-7"></a></li>
        <li><a href="#heading-8"></a></li>
        <li><a href="#heading-9"></a></li>
      </ul>
    </li>
    <li><a href="#답5">답5</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












