<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/categories/aws/"><meta property="og:site_name" content=" "><meta property="og:title" content="AWS"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><title>AWS |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/categories/aws/><link rel=stylesheet href=/book.min.30a7836b6a89342da3b88e7afd1036166aeced16c8de12df060ded2031837886.css integrity="sha256-MKeDa2qJNC2juI56/RA2Fmrs7RbI3hLfBg3tIDGDeIY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.f908bcb1e1b967c8c20689e5d48d31b75b23b860468575db6f9fd3d1ed0ce5b4.js integrity="sha256-+Qi8seG5Z8jCBonl1I0xt1sjuGBGhXXbb5/T0e0M5bQ=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=https://yshghid.github.io/categories/aws/index.xml title=" "></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>기록</span><ul><li><a href=/docs/hobby/book/>글</a><ul></ul></li><li><a href=/docs/hobby/daily/>일상</a><ul></ul></li></ul></li><li class=book-section-flat><span>공부</span><ul><li><a href=/docs/study/ai/>AI/Data</a><ul></ul></li><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/be/>BE</a><ul></ul></li><li><a href=/docs/study/fe/>FE</a><ul></ul></li><li><a href=/docs/study/career/>취업</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>AWS</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class="markdown book-article"><p><em>2026-02-08</em> ⋯ AWS #5 SiLok 프로젝트 ECS 파이프라인 빌드</p><p style=height:4.5em;overflow:hidden><a href=/docs/study/be/be59/>StudyNote와 동일한 방식으로 ECS 파이프라인을 빌드했고 파일 구조는 아래와 같다 차이점은 아래와같다고 함. 1. 백엔드: CPU 1024 / 메모리 4096 (tensorflow + torch 때문에 더 큰 리소스) 2. RDS PostgreSQL 추가 (db.t3.micro, 14버전) 3. SSM Parameter Store로 DATABASE_URL, OPENAI_API_KEY 관리 4. ALB 라우팅: /api/*, /health, /db-health, /schedule-status → 백엔드 5. 프론트엔드: 빌드 없이 정적 파일 복사 (CDN Vue이므로) 6. docker-entrypoint.sh로 런타임에 config.js 생성 (Google Maps API 키 등) 그리고 안내받은 배포 순서. 1. SSH 키 생성 (없다면): ssh-keygen -t rsa -b 4096 -f ~/.ssh/vitaltime-bastion -N "" 2. Terraform apply (키 경로 지정): cd /Users/yshmbid/Documents/home/github/VitalTime/terraform terraform apply -var="db_password=mypassword" -var="bastion_public_key=$(cat ~/.ssh/vitaltime-bastion.pub)" 3. SSH 터널링 (apply 완료 후): RDS 엔드포인트와 Bastion IP 확인 terraform output rds_endpoint terraform output bastion_public_ip SSH 터널 (로컬 5433 → RDS 5432) ssh -i ~/.ssh/vitaltime-bastion -L 5433: ec2-user@ -N 4. 다른 터미널에서 데이터 로드: psql -h localhost -p 5433 -U myuser -d mydatabase -f /Users/yshmbid/Documents/home/github/VitalTime/data/dump.sql</a></p><hr><p><em>2026-02-08</em> ⋯ AWS #4 ECS 파이프라인 트러블슈팅</p><p style=height:4.5em;overflow:hidden><a href=/docs/study/be/be58/>Docker 이미지를 ECR에 푸시하는 원래 코드는 아래와 같았다. 그 다음 url로 접속한다: http://studynote-alb-123356897.ap-northeast-2.elb.amazonaws.com 트러블슈팅 안내받은대로 했는데 창은 제대로 뜨지만 사이드바가 비어있었다. /api/docs/structure가 [] 반환하는것이었고 백엔드 Dockerfile에서 COPY . .은 backend/ 폴더 내용만 복사하는데 docs/, _index.md, data/는 프로젝트 루트에 있어서 빌드 컨텍스트에 포함되지 않았다. 이에 빌드 컨텍스트를 프로젝트 루트로 바꿔주고 이에 맞게 main.py와 푸시 명령어도 바꿔줬다. cf2 트러블슈팅후 바뀐 코드 백엔드를 backend/ 안에서 빌드하면 docs/, _index.md, data/가 빌드 컨텍스트에 포함되지 않아서 실패한다. 프로젝트 루트(StudyNote/)에서 -f backend/Dockerfile .으로 빌드해야함.</a></p><hr><p><em>2026-02-08</em> ⋯ AWS #3 terraform tfstate 트러블슈팅</p><p style=height:4.5em;overflow:hidden><a href=/docs/study/be/be54/>terraform 트러블슈팅 git add . 하려는데 아래 경고가 떴다 .terraform은 gitignore 해야한대서 아래와 같이 수정!! tfstate 트러블슈팅 디렉토리 삭제하고, 똑같이 StudyNote라는 디렉토리 만들어서 git init으로 세팅하면 완전 동일하게 세팅되지 않고 gitignore 등등 된거는 깃허브에 안올라가있으니까 누락된다. 누락되는 파일과 복구 방법
- node_modules/: cd frontend && npm install
- .terraform/: cd terraform && terraform init
- *.tfstate: 복구 불가
- dist/: npm run build
- .env: 직접 다시 작성
- __pycache__/: 자동 생성됨 대부분 명령어로 복구 가능한데, terraform.tfstate는 복구 불가. 이 파일이 없으면 Terraform이 AWS에 이미 만든 리소스를 모르게 돼서 관리가 안됨 해결 방법은 tfstate를 S3에 저장하는것.</a></p><hr><p><em>2026-02-07</em> ⋯ AWS #2 Docker + AWS ECS 파이프라인 구성</p><p style=height:4.5em;overflow:hidden><a href=/docs/study/be/be53/>배포 파일 생성 먼저 필요한 파일들을 위 구조로 생성해줬다. AWS key 추가 다음으로 GitHub Secrets에 AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY를 추가한다. key는 AWS Console에서 발급받는데 AWS Console 로그인 -> 계정 클릭 -> 보안 자격 증명 -> Access keys -> Create access key 해준 뒤에 Access Key ID와 Secret Access Key를 복사한다. 그리고 Github secrets를 Settings → Secrets and variables → Actions -> New repository secret -> AWS_ACCESS_KEY_ID로 복사한 키, AWS_SECRET_ACCESS_KEY로 복사한 시크릿을 넣어준다. Terraform으로 인프라 생성 terraform apply로 AWS 인프라를 생성한다. Docker 이미지를 ECR에 푸시 푸시 후 ECS 서비스를 재시작한다. 그 다음 url로 접속한다: http://studynote-alb-123356897.ap-northeast-2.elb.amazonaws.com 트러블슈팅 안내받은대로 했는데 503 Service Temporarily Unavailable이 떴다. Mac은 ARM인데 AWS ECS는 x86이라서 ARM/x86 아키텍처 문제였고 amd64 플랫폼 지정해서 다시 빌드해줬다. cf 클로드 참고자료 terraform apply 하면 AWS에 VPC, ECS 클러스터, ALB, ECR 등이 생성됨. 완료 후 ALB DNS 주소가 출력되고 그게 접속 URL 참고로 처음 apply 전에 ECR에 이미지가 없어서 ECS 서비스가 실패할 수 있음 그럴 경우: 는 AWS 계정 ID (12자리 숫자). cf2 트러블슈팅후 바뀐 코드 백엔드를 backend/ 안에서 빌드하면 docs/, _index.md, data/가 빌드 컨텍스트에 포함되지 않아서 실패한다. 프로젝트 루트(StudyNote/)에서 -f backend/Dockerfile .으로 빌드해야함.</a></p><hr><p><em>2026-02-07</em> ⋯ AWS #1 프로젝트 배포하기</p><p style=height:4.5em;overflow:hidden><a href=/docs/study/be/be52/>위 구조로 1) 학습 코드를 ipynb 파일로 업로드하면 2) ui는 블로그 형식으로 보여지면서 구글 colab처럼 코드 실행도 할수있는 StudyNote라는 프로젝트를 만들었다. 깃허브에 push했고 local로 띄워볼수있게 만들었는데 local이 아닌 실제 url로 볼수있게 배포해보려고한다. 일단 추천받은 방법 3개는 다음과 같다 1. 백엔드 (render.com) / 프론트엔드 (Vercel 또는 Netlify) 2. WS EC2 (직접 관리) 3. Docker + AWS: Dockerfile 작성 후 AWS ECS 또는 EC2에 배포 이중에 고민하다가 Docker + AWS로 해보기로 했다.</a></p><hr></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents></nav></div></aside></main></body></html>