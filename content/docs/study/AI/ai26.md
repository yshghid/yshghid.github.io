---
date : 2025-08-22
tags: ['2025-08']
categories: ['AI']
bookHidden: true
title: "MLflow #3"
---

# MLflow #3

#2025-08-22

---

### 1. 개념


- MLflow: 머신러닝 실험을 관리하기 위한 플랫폼. 모델을 학습하는 과정에서 파라미터, 메트릭, 아티팩트, 실행(run) 기록을 남긴다.
- run(실행 단위): 하나의 학습 또는 실험 과정
- start_run / end_run: 새로운 run을 열고 닫는 과정
- active_run: 현재 열려 있는 run
- last_active_run: 최근에 끝났거나 여전히 열려 있는 run
- log_param / log_metric: 하이퍼파라미터나 성능 지표를 기록하는 함수

###

### 2. 코드


<mark>#1 active_run.py</mark>

```python
import mlflow

# Start and end a run
with mlflow.start_run(): # 새로운 run을 시작
    mlflow.log_param("param1", 42) # 현재 run에 "param1" = 42라는 파라미터 기록
    # The run is active within this block
    print(f"Active run ID inside the block: {mlflow.active_run().info.run_id}") # 현재 실행 중인 run

# Now the run is ended
print(f"Active run after block: {mlflow.active_run()}")        # None: 이미 run이 종료되었기 때문에 mlflow.active_run()은 None
print(f"Last active run after block: {mlflow.last_active_run()}")  # Should not be None: 방금 끝난 run 객체를 반환하므로, None이 아니라 마지막 run의 메타데이터.

# We can still access the last run’s ID:
last_run = mlflow.last_active_run()
if last_run:
    print(f"Last run ID: {last_run.info.run_id}") # 마지막 run의 ID
```

현재 run과 최근 run을 구분해서 관리.
- 실행 중에는 active_run()으로 현재 run을 확인할수있고
- 실행이 끝난 후 last_active_run()으로 최근 run을 확인할수있다.

###

<mark>#2 start_end_run.py</mark>

```python
import mlflow
import time

# --- Step 1: Create a brand-new run and log something ---
with mlflow.start_run() as run:
    run_id = run.info.run_id
    mlflow.log_param("initial_param", 123)
    mlflow.log_metric("initial_metric", 0.5)
    print(f"Initial run created with run_id: {run_id}")

# Simulate a pause in your process (e.g., job interruption)
time.sleep(2)

# --- Step 2: Resume the existing run by run_id ---
with mlflow.start_run(run_id=run_id):
    mlflow.log_param("resumed_param", 999)
    mlflow.log_metric("resumed_metric", 0.95)
    print(f"Resumed run with run_id: {run_id}")

print("Done logging to the same run.")
```