<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì
  #

#2025-08-04


ì¡°ê±´

nginx:alpine ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©
ë…¸ì¶œ PortëŠ”80
nginxë¥¼ì‹¤í–‰í•˜ëŠ”ë°©ì‹ì€ -nginx -g daemon off;
nginxì˜ routing ì„¤ì •ì€ default.confì—ì„¤ì •í•œë‹¤.


  0. ì‘ì—… ìœ„ì¹˜
  #

$ pwd
/Users/yshmbid/rde/config/workspace/exec-template

$ ls
Dockerfile      default.conf    deploy          deploy.yaml     docker-build.sh docker-push.sh  service.yaml    src

  1. docker-build.shì™€ docker-push.sh ë³µì‚¬
  #

$ pwd
/Users/yshmbid/rde/config/workspace/container/05.webserver
$ ls
Dockerfile      default.conf    deploy          docker-build.sh docker-push.sh  src
05.webserverì˜ docker-build.shì™€ docker-push.shë¥¼ ì‘ì—… ë””ë ‰í† ë¦¬ì¸ exec-templateë¡œ ë³µì‚¬í•´ì¤€ë‹¤."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/docs/study/sw/sw17/"><meta property="og:site_name" content=" "><meta property="og:title" content="Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì"><meta property="og:description" content="Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì # #2025-08-04
ì¡°ê±´
nginx:alpine ì´ë¯¸ì§€ë¥¼ ì‚¬ìš© ë…¸ì¶œ PortëŠ”80 nginxë¥¼ì‹¤í–‰í•˜ëŠ”ë°©ì‹ì€ -nginx -g daemon off; nginxì˜ routing ì„¤ì •ì€ default.confì—ì„¤ì •í•œë‹¤. 0. ì‘ì—… ìœ„ì¹˜ # $ pwd /Users/yshmbid/rde/config/workspace/exec-template $ ls Dockerfile default.conf deploy deploy.yaml docker-build.sh docker-push.sh service.yaml src 1. docker-build.shì™€ docker-push.sh ë³µì‚¬ # $ pwd /Users/yshmbid/rde/config/workspace/container/05.webserver $ ls Dockerfile default.conf deploy docker-build.sh docker-push.sh src 05.webserverì˜ docker-build.shì™€ docker-push.shë¥¼ ì‘ì—… ë””ë ‰í† ë¦¬ì¸ exec-templateë¡œ ë³µì‚¬í•´ì¤€ë‹¤."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-08-04T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-04T00:00:00+00:00"><meta property="article:tag" content="2025-08"><title>Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/docs/study/sw/sw17/><link rel=stylesheet href=/book.min.6217d077edb4189fd0578345e84bca1a884dfdee121ff8dc9a0f55cfe0852bc9.css integrity="sha256-YhfQd+20GJ/QV4NF6EvKGohN/e4SH/jcmg9Vz+CFK8k=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.4f8a0cab9134c7768682471c3512fdf092ccf735d13e4306b110e9a6fcdb7044.js integrity="sha256-T4oMq5E0x3aGgkccNRL98JLM9zXRPkMGsRDppvzbcEQ=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>ê¸°ë¡</span><ul><li><a href=/docs/hobby/book/>ê¸€</a><ul></ul></li><li><a href=/docs/hobby/daily/>ì¼ìƒ</a><ul></ul></li></ul></li><li class=book-section-flat><span>ê³µë¶€</span><ul><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/ai/>AI</a><ul></ul></li><li><a href=/docs/study/sw/>SW</a><ul></ul></li><li><a href=/docs/study/algorithm/>ì•Œê³ ë¦¬ì¦˜</a><ul></ul></li><li><a href=/docs/study/career/>ì·¨ì—…</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#0-ì‘ì—…-ìœ„ì¹˜>0. ì‘ì—… ìœ„ì¹˜</a></li><li><a href=#1-docker-buildshì™€-docker-pushsh-ë³µì‚¬>1. docker-build.shì™€ docker-push.sh ë³µì‚¬</a></li><li><a href=#2-dockerfileê³¼-defaultconf-ì‘ì„±>2. Dockerfileê³¼ default.conf ì‘ì„±</a></li><li><a href=#3-íŒŒì¼-êµ¬ì¡°>3. íŒŒì¼ êµ¬ì¡°</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=docker-4-3ì¼ì°¨-ì‹¤ìŠµ-ìì‹ ì˜-frontend-html-js-css-ê°œë°œ-ì½”ë“œë¥¼-ì»¨í…Œì´ë„ˆë¡œ-ë§Œë“¤ê³ -ì´ê²ƒì„-ì‹¤í–‰ì‹œì¼œ-ë³´ì>Docker #4 3ì¼ì°¨ ì‹¤ìŠµ: ìì‹ ì˜ Frontend (HTML, JS, CSS) ê°œë°œ ì½”ë“œë¥¼ ì»¨í…Œì´ë„ˆë¡œ ë§Œë“¤ê³  ì´ê²ƒì„ ì‹¤í–‰ì‹œì¼œ ë³´ì
<a class=anchor href=#docker-4-3%ec%9d%bc%ec%b0%a8-%ec%8b%a4%ec%8a%b5-%ec%9e%90%ec%8b%a0%ec%9d%98-frontend-html-js-css-%ea%b0%9c%eb%b0%9c-%ec%bd%94%eb%93%9c%eb%a5%bc-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88%eb%a1%9c-%eb%a7%8c%eb%93%a4%ea%b3%a0-%ec%9d%b4%ea%b2%83%ec%9d%84-%ec%8b%a4%ed%96%89%ec%8b%9c%ec%bc%9c-%eb%b3%b4%ec%9e%90>#</a></h1><p>#2025-08-04</p><hr><blockquote><p>ì¡°ê±´</p><ol><li>nginx:alpine ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©</li><li>ë…¸ì¶œ PortëŠ”80</li><li>nginxë¥¼ì‹¤í–‰í•˜ëŠ”ë°©ì‹ì€ -nginx -g daemon off;</li><li>nginxì˜ routing ì„¤ì •ì€ default.confì—ì„¤ì •í•œë‹¤.</li></ol></blockquote><h3 id=0-ì‘ì—…-ìœ„ì¹˜>0. ì‘ì—… ìœ„ì¹˜
<a class=anchor href=#0-%ec%9e%91%ec%97%85-%ec%9c%84%ec%b9%98>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pwd
</span></span><span style=display:flex><span>/Users/yshmbid/rde/config/workspace/exec-template
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>Dockerfile      default.conf    deploy          deploy.yaml     docker-build.sh docker-push.sh  service.yaml    src
</span></span></code></pre></div><h3 id=1-docker-buildshì™€-docker-pushsh-ë³µì‚¬>1. docker-build.shì™€ docker-push.sh ë³µì‚¬
<a class=anchor href=#1-docker-buildsh%ec%99%80-docker-pushsh-%eb%b3%b5%ec%82%ac>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pwd
</span></span><span style=display:flex><span>/Users/yshmbid/rde/config/workspace/container/05.webserver
</span></span><span style=display:flex><span>$ ls
</span></span><span style=display:flex><span>Dockerfile      default.conf    deploy          docker-build.sh docker-push.sh  src
</span></span></code></pre></div><p>05.webserverì˜ docker-build.shì™€ docker-push.shë¥¼ ì‘ì—… ë””ë ‰í† ë¦¬ì¸ exec-templateë¡œ ë³µì‚¬í•´ì¤€ë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># docker-build.sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>NAME<span style=color:#f92672>=</span>sk019
</span></span><span style=display:flex><span>IMAGE_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;healthcheck-server&#34;</span> <span style=color:#75715e>#IMAGE_NAME=&#34;webserver&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VERSION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>CPU_PLATFORM<span style=color:#f92672>=</span>arm64 <span style=color:#75715e>#amd64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Docker ì´ë¯¸ì§€ ë¹Œë“œ</span>
</span></span><span style=display:flex><span>docker build <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --tag <span style=color:#e6db74>${</span>NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>IMAGE_NAME<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --file Dockerfile <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --platform linux/<span style=color:#e6db74>${</span>CPU_PLATFORM<span style=color:#e6db74>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  <span style=color:#e6db74>${</span>IS_CACHE<span style=color:#e6db74>}</span> .
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># docker-push.sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#!/bin/bash</span>
</span></span><span style=display:flex><span>NAME<span style=color:#f92672>=</span>sk019
</span></span><span style=display:flex><span>IMAGE_NAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;healthcheck-server&#34;</span> <span style=color:#75715e>#IMAGE_NAME=&#34;webserver&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>VERSION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>DOCKER_REGISTRY<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;amdp-registry.skala-ai.com/skala25a&#34;</span>
</span></span><span style=display:flex><span>DOCKER_REGISTRY_USER<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;robot\$skala25a&#34;</span>
</span></span><span style=display:flex><span>DOCKER_REGISTRY_PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1qB9cyusbNComZPHAdjNIFWinf52xaBJ&#34;</span>
</span></span><span style=display:flex><span>DOCKER_CACHE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;--no-cache&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1. Docker ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë¡œê·¸ì¸ (ì˜µì…˜: ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ë¯¸ë¦¬ ë¡œê·¸ì¸í•´ë‘ì–´ë„ ë©ë‹ˆë‹¤)</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>${</span>DOCKER_REGISTRY_PASSWORD<span style=color:#e6db74>}</span> | docker login <span style=color:#e6db74>${</span>DOCKER_REGISTRY<span style=color:#e6db74>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>	-u <span style=color:#e6db74>${</span>DOCKER_REGISTRY_USER<span style=color:#e6db74>}</span>  --password-stdin <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>   	<span style=color:#f92672>||</span> <span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;Docker ë¡œê·¸ì¸ ì‹¤íŒ¨&#34;</span>; exit 1; <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2. harbor ë¡œ push í•˜ê¸° ìœ„í•´ tag ì¶”ê°€</span>
</span></span><span style=display:flex><span>docker tag  <span style=color:#e6db74>${</span>NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>IMAGE_NAME<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>DOCKER_REGISTRY<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>IMAGE_NAME<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Docker ì´ë¯¸ì§€ í‘¸ì‹œ</span>
</span></span><span style=display:flex><span>docker push <span style=color:#e6db74>${</span>DOCKER_REGISTRY<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>IMAGE_NAME<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>VERSION<span style=color:#e6db74>}</span>
</span></span></code></pre></div><h3 id=2-dockerfileê³¼-defaultconf-ì‘ì„±>2. Dockerfileê³¼ default.conf ì‘ì„±
<a class=anchor href=#2-dockerfile%ea%b3%bc-defaultconf-%ec%9e%91%ec%84%b1>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Dockerfile</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx ê¸°ë°˜ ì´ë¯¸ì§€ ì‚¬ìš©</span>
</span></span><span style=display:flex><span>FROM nginx:alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ì»¤ìŠ¤í…€ nginx ì„¤ì • íŒŒì¼ ë³µì‚¬</span>
</span></span><span style=display:flex><span>COPY default.conf /etc/nginx/conf.d/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx í¬íŠ¸ ë…¸ì¶œ</span>
</span></span><span style=display:flex><span>EXPOSE <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx ì‹¤í–‰ (ê¸°ë³¸ CMDê°€ ì´ë¯¸ ì„¤ì •ë˜ì–´ ìˆìŒ)</span>
</span></span><span style=display:flex><span>CMD <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;nginx&#34;</span>, <span style=color:#e6db74>&#34;-g&#34;</span>, <span style=color:#e6db74>&#34;daemon off;&#34;</span><span style=color:#f92672>]</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># default.conf </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>server <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    listen 80;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># ì •ì  íŒŒì¼ ì„œë¹™</span>
</span></span><span style=display:flex><span>    location /sk019 <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        alias /usr/share/nginx/html/;
</span></span><span style=display:flex><span>        try_files $uri $uri/ /index.html;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=3-íŒŒì¼-êµ¬ì¡°>3. íŒŒì¼ êµ¬ì¡°
<a class=anchor href=#3-%ed%8c%8c%ec%9d%bc-%ea%b5%ac%ec%a1%b0>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>/workspace
</span></span><span style=display:flex><span>â””â”€â”€ exec-template
</span></span><span style=display:flex><span>     â”œâ”€â”€ Dockerfile
</span></span><span style=display:flex><span>     â”œâ”€â”€ default.conf
</span></span><span style=display:flex><span>     â”œâ”€â”€ docker-build.sh
</span></span><span style=display:flex><span>     â”œâ”€â”€ docker-push.sh
</span></span><span style=display:flex><span>     â”œâ”€â”€ cicd.sh
</span></span><span style=display:flex><span>     â”œâ”€â”€ deploy/
</span></span><span style=display:flex><span>     â”‚   â”œâ”€â”€ deploy.t       
</span></span><span style=display:flex><span>     â”‚   â”œâ”€â”€ service.t
</span></span><span style=display:flex><span>     â”‚   â””â”€â”€ env.properties
</span></span><span style=display:flex><span>     â””â”€â”€ src/
</span></span><span style=display:flex><span>         â”œâ”€â”€ index.html      
</span></span><span style=display:flex><span>         â””â”€â”€ media/ 
</span></span></code></pre></div><p>src ë””ë ‰í† ë¦¬ì— index.htmlì„ ë„£ì–´ì¤¬ë‹¤.</p><p>#5 ì´ë¯¸ì§€ push build + docker run</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo ./docker-push.sh
</span></span><span style=display:flex><span>$ sudo ./docker-build.sh
</span></span><span style=display:flex><span>$ sudo docker run -d --name posts-get --network bridge -p 8888:80 sk019-posts-get.arm64:1.0
</span></span></code></pre></div><h1><a class=anchor href=#>#</a></h1><p>#2 cicd.sh ì‘ì„±</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># ê¸°ë³¸ê°’ ì„¤ì •</span>
</span></span><span style=display:flex><span>ENV_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;env.properties&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># usage ì¶œë ¥ í•¨ìˆ˜</span>
</span></span><span style=display:flex><span>usage<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;Usage: </span>$0<span style=color:#e6db74> [-b|--build] [-p|--push] [-y|--yaml] [-d|--deploy] [-r|--remove] [-a|--all] [-f|--file &lt;env file&gt;]&#34;</span>
</span></span><span style=display:flex><span>  exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># env.properties ë¡œë“œ í•¨ìˆ˜</span>
</span></span><span style=display:flex><span>load_env<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span>$ENV_FILE<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    source <span style=color:#e6db74>&#34;</span>$ENV_FILE<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;í™˜ê²½ íŒŒì¼ &#39;</span>$ENV_FILE<span style=color:#e6db74>&#39;ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Maven Build</span>
</span></span><span style=display:flex><span>build<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;ğŸ”¨ Maven ë¹Œë“œ ì‹œì‘...&#34;</span>
</span></span><span style=display:flex><span>  mvn clean package
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Docker ì´ë¯¸ì§€ build &amp; push</span>
</span></span><span style=display:flex><span>push_image<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;ğŸ³ Docker ì´ë¯¸ì§€ ìƒì„± ë° push ì‹œì‘...&#34;</span>
</span></span><span style=display:flex><span>  docker build -t $DOCKER_IMAGE_NAME .
</span></span><span style=display:flex><span>  docker push $DOCKER_IMAGE_NAME
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># YAML ìƒì„±</span>
</span></span><span style=display:flex><span>generate_yaml<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;ğŸ“„ YAML íŒŒì¼ ìƒì„± ì¤‘...&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> file in *.t; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[</span> -e <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>||</span> <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    cp <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>file%.t<span style=color:#e6db74>}</span><span style=color:#e6db74>.yaml&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># K8sì— ë°°í¬</span>
</span></span><span style=display:flex><span>deploy_k8s<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;ğŸš€ Kubernetesì— ë°°í¬ ì‹œì‘...&#34;</span>
</span></span><span style=display:flex><span>  kubectl apply -f ./*.yaml
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># K8s ë¦¬ì†ŒìŠ¤ ì‚­ì œ</span>
</span></span><span style=display:flex><span>remove_k8s<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  echo <span style=color:#e6db74>&#34;ğŸ—‘ï¸ Kubernetes ë¦¬ì†ŒìŠ¤ ì œê±°...&#34;</span>
</span></span><span style=display:flex><span>  kubectl delete -f ./*.yaml
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ì „ì²´ ì‹¤í–‰</span>
</span></span><span style=display:flex><span>run_all<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  load_env
</span></span><span style=display:flex><span>  build
</span></span><span style=display:flex><span>  push_image
</span></span><span style=display:flex><span>  generate_yaml
</span></span><span style=display:flex><span>  deploy_k8s
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ì¸ì íŒŒì‹±</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$#<span style=color:#e6db74>&#34;</span> -gt <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>    -b|--build<span style=color:#f92672>)</span> ACTION_BUILD<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -p|--push<span style=color:#f92672>)</span> ACTION_PUSH<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -y|--yaml<span style=color:#f92672>)</span> ACTION_YAML<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -d|--deploy<span style=color:#f92672>)</span> ACTION_DEPLOY<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -r|--remove<span style=color:#f92672>)</span> ACTION_REMOVE<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -a|--all<span style=color:#f92672>)</span> ACTION_ALL<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> ;;
</span></span><span style=display:flex><span>    -f|--file<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      shift
</span></span><span style=display:flex><span>      ENV_FILE<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    -h|--help<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      usage
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      echo <span style=color:#e6db74>&#34;âŒ ì•Œ ìˆ˜ ì—†ëŠ” ì˜µì…˜: </span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>      usage
</span></span><span style=display:flex><span>      ;;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span>  shift
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ì‹¤í–‰ ì¡°ê±´</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $ACTION_ALL <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>  run_all
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>  load_env
</span></span><span style=display:flex><span>  <span style=color:#f92672>[[</span> $ACTION_BUILD <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> build
</span></span><span style=display:flex><span>  <span style=color:#f92672>[[</span> $ACTION_PUSH <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> push_image
</span></span><span style=display:flex><span>  <span style=color:#f92672>[[</span> $ACTION_YAML <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> generate_yaml
</span></span><span style=display:flex><span>  <span style=color:#f92672>[[</span> $ACTION_DEPLOY <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> deploy_k8s
</span></span><span style=display:flex><span>  <span style=color:#f92672>[[</span> $ACTION_REMOVE <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> remove_k8s
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p>cicd.sh ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì´ ë‚˜ì˜¤ëŠ”ë° pptë‘ workspace ë””ë ‰í† ë¦¬ ì•ˆì— ì•„ë¬´ë¦¬ì°¾ì•„ë´ë„ ì—†ì–´ì„œ&mldr; ê·¸ëƒ¥ ì±—ì§€í”¼í‹°ì—ë„£ê³  ë§Œë“¤ì—ˆë‹¤.</p><p>ì°¸ê³ ë¡œ deploy.tì™€ service.tëŠ”?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># deploy.t</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apiVersion: apps/v1
</span></span><span style=display:flex><span>kind: Deployment
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  name: sk019-posts-get
</span></span><span style=display:flex><span>  namespace: skala-practice
</span></span><span style=display:flex><span>spec:
</span></span><span style=display:flex><span>  replicas: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  selector:
</span></span><span style=display:flex><span>    matchLabels:
</span></span><span style=display:flex><span>      app: sk019-posts-get
</span></span><span style=display:flex><span>  template:
</span></span><span style=display:flex><span>    metadata:
</span></span><span style=display:flex><span>      labels:
</span></span><span style=display:flex><span>        app: sk019-posts-get
</span></span><span style=display:flex><span>    spec:
</span></span><span style=display:flex><span>      containers:
</span></span><span style=display:flex><span>        <span style=color:#75715e>#- name: posts-get amdp-registry.skala-ai.com/skala25a/sk019-posts-get.amd64:1.0</span>
</span></span><span style=display:flex><span>        - name: posts-get amdp-registry.skala-ai.com/skala25a/sk019-posts-get.arm64:1.0
</span></span><span style=display:flex><span>          ports:
</span></span><span style=display:flex><span>            - containerPort: <span style=color:#ae81ff>80</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># service.t</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apiVersion: v1
</span></span><span style=display:flex><span>kind: Service
</span></span><span style=display:flex><span>metadata:
</span></span><span style=display:flex><span>  name: <span style=color:#e6db74>${</span>USER_NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>SERVICE_NAME<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>  namespace: <span style=color:#e6db74>${</span>NAMESPACE<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>spec:
</span></span><span style=display:flex><span>  selector:
</span></span><span style=display:flex><span>    app: <span style=color:#e6db74>${</span>USER_NAME<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>SERVICE_NAME<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>  ports:
</span></span><span style=display:flex><span>    - name: http
</span></span><span style=display:flex><span>      protocol: TCP
</span></span><span style=display:flex><span>      port: <span style=color:#ae81ff>8888</span> <span style=color:#75715e>#8080</span>
</span></span><span style=display:flex><span>      targetPort: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>  type: ClusterIP
</span></span></code></pre></div><ul><li>service.tëŠ” ì›ë˜ 8080 ë¼ìˆì—ˆëŠ”ë° 8888 ê°™ì•„ì„œ ë°”ê¿”ì¤Œ.</li><li>ë§¥ì´ë¼ì„œ armìœ¼ë¡œ ë°”ê¿”ì¤Œ.</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=yshghid/yshghid.github.io data-repo-id=R_kgDONkMkNg data-category-id=DIC_kwDONkMkNs4CloJh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#0-ì‘ì—…-ìœ„ì¹˜>0. ì‘ì—… ìœ„ì¹˜</a></li><li><a href=#1-docker-buildshì™€-docker-pushsh-ë³µì‚¬>1. docker-build.shì™€ docker-push.sh ë³µì‚¬</a></li><li><a href=#2-dockerfileê³¼-defaultconf-ì‘ì„±>2. Dockerfileê³¼ default.conf ì‘ì„±</a></li><li><a href=#3-íŒŒì¼-êµ¬ì¡°>3. íŒŒì¼ êµ¬ì¡°</a></li></ul></li></ul></nav></div></aside></main></body></html>