<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  SQL #3 스키마 분리와 AI 분석
  #

#2025-07-29


  1. 문제
  #

생각 정리

AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?
스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요?
향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요?


  2. AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?
  #


AI 분석이 포함될 때 별도 스키마로 나누는 것이 유리한 이유는 데이터 분리의 명확성, 서비스 안정성과 확장성, 접근 권한 할당의 유리함 때문입니다."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/docs/study/sw/sw9/"><meta property="og:site_name" content=" "><meta property="og:title" content="SQL #3 스키마 분리와 AI 분석"><meta property="og:description" content="SQL #3 스키마 분리와 AI 분석 # #2025-07-29
1. 문제 # 생각 정리
AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요? 스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요? 향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요? 2. AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요? # AI 분석이 포함될 때 별도 스키마로 나누는 것이 유리한 이유는 데이터 분리의 명확성, 서비스 안정성과 확장성, 접근 권한 할당의 유리함 때문입니다."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-07-29T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-29T00:00:00+00:00"><meta property="article:tag" content="2025-07"><title>SQL #3 스키마 분리와 AI 분석 |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/docs/study/sw/sw9/><link rel=stylesheet href=/book.min.6217d077edb4189fd0578345e84bca1a884dfdee121ff8dc9a0f55cfe0852bc9.css integrity="sha256-YhfQd+20GJ/QV4NF6EvKGohN/e4SH/jcmg9Vz+CFK8k=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.478e148e5465d7f77599991dc9fc3e002e853cbce0d426fbf63720b433cfb7e9.js integrity="sha256-R44UjlRl1/d1mZkdyfw+AC6FPLzg1Cb79jcgtDPPt+k=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>기록</span><ul><li><a href=/docs/hobby/book/>글</a><ul></ul></li><li><a href=/docs/hobby/daily/>일상</a><ul></ul></li><li><a href=/docs/hobby/music/>음악</a><ul></ul></li><li><a href=/docs/hobby/youtube/>ott</a><ul></ul></li><li><a href=/docs/hobby/movie/>영화</a><ul></ul></li><li><a href=/docs/hobby/baking/>베이킹</a><ul></ul></li></ul></li><li class=book-section-flat><span>공부</span><ul><li><a href=/docs/study/ai/>AI</a><ul></ul></li><li><a href=/docs/study/sw/>SW</a><ul></ul></li><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/devops/>DevOps</a><ul></ul></li><li><a href=/docs/study/algorithm/>코테</a><ul></ul></li><li><a href=/docs/study/career/>취업</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>SQL #3 스키마 분리와 AI 분석</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#1-문제>1. 문제</a></li><li><a href=#2-ai-분석이-들어갈-때-왜-별도-스키마로-나누는-것이-유리할까요>2. AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?</a></li><li><a href=#3-스키마-vs-테이블-분리-어떤-방식이-어떤-상황에-적합할까요>3. 스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요?</a></li><li><a href=#4-스키마가-이와-같을-때-향후-pgvector-또는-ai-모델-결과를-넣기-위해-어떻게-테이블을-확장할-수-있을까요>4. (스키마가 이와 같을 때) 향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요?</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=sql-3-스키마-분리와-ai-분석>SQL #3 스키마 분리와 AI 분석
<a class=anchor href=#sql-3-%ec%8a%a4%ed%82%a4%eb%a7%88-%eb%b6%84%eb%a6%ac%ec%99%80-ai-%eb%b6%84%ec%84%9d>#</a></h1><p>#2025-07-29</p><hr><h3 id=1-문제>1. 문제
<a class=anchor href=#1-%eb%ac%b8%ec%a0%9c>#</a></h3><p>생각 정리</p><ul><li>AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?</li><li>스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요?</li><li>향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요?</li></ul><h3 id=2-ai-분석이-들어갈-때-왜-별도-스키마로-나누는-것이-유리할까요>2. AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?
<a class=anchor href=#2-ai-%eb%b6%84%ec%84%9d%ec%9d%b4-%eb%93%a4%ec%96%b4%ea%b0%88-%eb%95%8c-%ec%99%9c-%eb%b3%84%eb%8f%84-%ec%8a%a4%ed%82%a4%eb%a7%88%eb%a1%9c-%eb%82%98%eb%88%84%eb%8a%94-%ea%b2%83%ec%9d%b4-%ec%9c%a0%eb%a6%ac%ed%95%a0%ea%b9%8c%ec%9a%94>#</a></h3><blockquote><p>AI 분석이 포함될 때 별도 스키마로 나누는 것이 유리한 이유는 데이터 분리의 명확성, 서비스 안정성과 확장성, 접근 권한 할당의 유리함 때문입니다.</p><p>기존의 운영 데이터를 다루는 테이블과, AI 분석을 위한 테이블은 목적과 데이터 특성이 근본적으로 다릅니다. 운영 데이터는 일반적으로 트랜잭션 중심으로 자주 읽고 쓰이며 구조가 고정되어 있는 반면, AI 분석용 데이터는 대규모 전처리, 파생 피처 생성, 예측 결과 저장 등 다양한 형태의 데이터가 존재하고 반복적으로 갱신되거나 실험적으로 활용될 수 있습니다.</p><p>이러한 차이를 고려할 때, 별도의 스키마로 AI 분석 영역을 분리해야 구조적 충돌 없이 명확하게 역할을 나눌 수 있습니다. 예를 들어 대학 학사관리 시스템에서, public 스키마에는 학생 정보(student), 강의 정보(course), 수강 기록(enrollment) 등의 정형화된 테이블이 존재하고 이들은 학적관리, 수강신청, 성적 입력 등의 기능에 사용됩니다. 여기에 AI 분석이 도입되어 학생의 학습 성향을 예측하고 맞춤형 강의를 추천하는 기능이 추가된다고 가정했을때 BERT 기반의 텍스트 임베딩 결과, 벡터 유사도 계산 결과, 추천 알고리즘 출력값 등을 기존 테이블에 직접 넣기 시작하면, 원래 목적의 테이블이 복잡해지고 이해하기 어려워질 뿐만 아니라, 비즈니스 로직에도 영향을 줄 수 있습니다. 그렇기 때문에 ai_analytics라는 스키마를 따로 만들어 AI 분석 전용 테이블을 두는 것이 바람직합니다.</p><p>이처럼 분석 전용 테이블이 별도 스키마로 분리되면, 운영 테이블을 해치지 않으면서도 자유롭게 다양한 실험과 확장이 가능해집니다. 또한, AI 분석은 종종 외부 라이브러리나 파이프라인과 연동되므로, 데이터 엔지니어, 분석가, 모델 개발자들이 운영 데이터에 직접 접근하지 않고 ai_analytics 스키마만 접근 권한을 받아 활용하도록 구성하면 보안 측면에서도 이점이 있습니다.</p></blockquote><h3 id=3-스키마-vs-테이블-분리-어떤-방식이-어떤-상황에-적합할까요>3. 스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요?
<a class=anchor href=#3-%ec%8a%a4%ed%82%a4%eb%a7%88-vs-%ed%85%8c%ec%9d%b4%eb%b8%94-%eb%b6%84%eb%a6%ac-%ec%96%b4%eb%96%a4-%eb%b0%a9%ec%8b%9d%ec%9d%b4-%ec%96%b4%eb%96%a4-%ec%83%81%ed%99%a9%ec%97%90-%ec%a0%81%ed%95%a9%ed%95%a0%ea%b9%8c%ec%9a%94>#</a></h3><blockquote><p>스키마 분리는 기능, 조직, 보안 등 논리적 또는 권한 기반의 분리를 할 때 적합합니다. 예를 들어, 한 기업이 운영 데이터와 분석 데이터를 함께 관리하고 있다면, 운영 시스템에서는 주문, 결제, 사용자 등 정형적이고 안정적인 데이터가 중심이 되고 이 경우에는 public 스키마에 orders, users, payments 같은 테이블이 존재합니다. 반면, 같은 데이터베이스 안에서 AI 분석을 위한 임베딩 결과나 예측 결과를 저장하고자 한다면, ai_analytics와 같은 별도 스키마를 생성해 customer_embedding, sales_forecast 등 분석 전용 테이블을 두는 것이 적절합니다.</p><p>반면 테이블 분리는 같은 스키마 내에서 데이터 구조가 달라질 때 유용합니다. 예를 들어, students 테이블에서 학부생과 대학원생은 공통 정보(이름, 연락처)는 같지만, 전공 필드나 지도교수 여부 등 일부 속성이 다를 수 있고 이럴 경우 students_undergrad와 students_grad로 테이블을 분리하면 중복 없는 구조 설계와 관리가 용이해집니다.</p><p>따라서 스키마 분리는 조직 간 분업, 보안, 논리적 독립성을 확보할 때 적합하고, 테이블 분리는 구조 차이, 사용 빈도, 성능 분리를 고려한 물리적 데이터 분리 시 적합합니다.</p></blockquote><h3 id=4-스키마가-이와-같을-때-향후-pgvector-또는-ai-모델-결과를-넣기-위해-어떻게-테이블을-확장할-수-있을까요>4. (스키마가 이와 같을 때) 향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요?
<a class=anchor href=#4-%ec%8a%a4%ed%82%a4%eb%a7%88%ea%b0%80-%ec%9d%b4%ec%99%80-%ea%b0%99%ec%9d%84-%eb%95%8c-%ed%96%a5%ed%9b%84-pgvector-%eb%98%90%eb%8a%94-ai-%eb%aa%a8%eb%8d%b8-%ea%b2%b0%ea%b3%bc%eb%a5%bc-%eb%84%a3%ea%b8%b0-%ec%9c%84%ed%95%b4-%ec%96%b4%eb%96%bb%ea%b2%8c-%ed%85%8c%ec%9d%b4%eb%b8%94%ec%9d%84-%ed%99%95%ec%9e%a5%ed%95%a0-%ec%88%98-%ec%9e%88%ec%9d%84%ea%b9%8c%ec%9a%94>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>Schemas:
</span></span><span style=display:flex><span>- public
</span></span><span style=display:flex><span>  └── instructors
</span></span><span style=display:flex><span>  └── courses
</span></span><span style=display:flex><span>  └── course_descriptions
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- seoul
</span></span><span style=display:flex><span>  └── students
</span></span><span style=display:flex><span>  └── enrollments
</span></span><span style=display:flex><span>  └── reviews
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- jeju
</span></span><span style=display:flex><span>  └── students
</span></span><span style=display:flex><span>  └── enrollments
</span></span><span style=display:flex><span>  └── reviews
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- analytics
</span></span><span style=display:flex><span>  └── student_embeddings
</span></span><span style=display:flex><span>  └── course_vectors
</span></span></code></pre></div><blockquote><p>현재의 스키마 구조는 public 스키마에 강의 및 강사 정보, seoul과 jeju에 캠퍼스별 수강생 및 수강 데이터, analytics 스키마에는 AI 분석 결과를 저장하도록 분리되어 있습니다.</p><p>analytics 스키마의 student_embeddings 테이블은 학생의 성향, 자기소개 텍스트, 학습 히스토리 등을 기반으로 생성된 벡터를 저장하는 용도로 활용할 수 있습니다. 초기에는 단일 벡터만 저장하지만, model_version, embedding_type 등의 컬럼을 추가하고, 각 벡터를 구분하여 저장할 수 있는 구조로 확장하여 모델에서 생성된 임베딩 벡터를 함께 저장할수 있습니다.</p><p>또한 course_vectors 테이블은 강의 설명 텍스트의 벡터 정보를 저장하는 공간인데 이 테이블 역시 모델 종류나 전처리 방식에 따라 서로 다른 임베딩 결과가 생성될 수 있으므로, preprocessing_method, embedding_dim, generated_at 등의 메타정보 컬럼을 추가해 다중 벡터 관리가 가능하도록 확장할 수 있습니다.</p><p>한편, AI 모델의 출력 결과가 단순 벡터 외에도 분류(label), 확률(probability), 예측값(score) 등으로 표현되는 경우도 많은데 이럴 경우 analytics 스키마에 새로운 테이블을 추가하여 모델 예측 결과를 저장하는 것이 적절합니다. 예를 들어 student_predictions(student_id, prediction_type, predicted_value, confidence, model_version) 형태의 테이블을 생성하여, 이수 가능성, 수강 추천 점수, 성적 예측 결과 등을 저장할 수 있습니다.</p></blockquote><p>이처럼 기존의 analytics 스키마의 확장 방향은 벡터 저장 구조의 유연성 확보, 모델 메타정보 관리, 예측 결과 저장용 테이블 추가 등으로 확장 가능합니다.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=yshghid/yshghid.github.io data-repo-id=R_kgDONkMkNg data-category-id=DIC_kwDONkMkNs4CloJh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#1-문제>1. 문제</a></li><li><a href=#2-ai-분석이-들어갈-때-왜-별도-스키마로-나누는-것이-유리할까요>2. AI 분석이 들어갈 때 왜 별도 스키마로 나누는 것이 유리할까요?</a></li><li><a href=#3-스키마-vs-테이블-분리-어떤-방식이-어떤-상황에-적합할까요>3. 스키마 vs. 테이블 분리, 어떤 방식이 어떤 상황에 적합할까요?</a></li><li><a href=#4-스키마가-이와-같을-때-향후-pgvector-또는-ai-모델-결과를-넣기-위해-어떻게-테이블을-확장할-수-있을까요>4. (스키마가 이와 같을 때) 향후 pgvector 또는 AI 모델 결과를 넣기 위해 어떻게 테이블을 확장할 수 있을까요?</a></li></ul></li></ul></nav></div></aside></main></body></html>