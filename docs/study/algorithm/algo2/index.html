<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  MutClust 코드 리펙토링 #2 arg_parser
  #

#2025-08-01

MutClust 알고리즘의 코드 구성은 아래와 같은데
MutClust
├── sc/
│    └── lib.py
│    └── arg_parser.py // 실행 설정
│    └── utils.py
└── Test
arg_parser.py는 실험 환경 파라미터 세팅 및 CLI 인자 파싱을 포함한다.
# === arg_parser.py ===
import argparse
from os.path import exists
from src.mlib import (
    DIMINISHING_FACTOR, EPSILON, EPSILON_SCALING_FACTOR,
    MAX_EPS, MIN_CLUSTER_LENGTH, CCM_MIN_PERCENTAGE_SUM
)

class ArgsInfo:
    def __init__(self):
        self.args = {}
        self.fin = ''
        self.ref = ''
        self.outdir = ''
        self.eps = EPSILON
        self.maxeps = MAX_EPS
        self.min_persum = CCM_MIN_PERCENTAGE_SUM
        self.eps_scaler_const = EPSILON_SCALING_FACTOR
        self.es_control_const = DIMINISHING_FACTOR
        self.min_cluster_length = MIN_CLUSTER_LENGTH

def set_env(input_path=None, reference=None, output_path=None):
    info = ArgsInfo()
    parser = argparse.ArgumentParser(prog=&#34;cluster.py&#34;)

    parser.add_argument('-f', '--input_file', type=str, default='/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/mutclust_input_data.txt', help='mutation frequency data file')
    parser.add_argument('-r', '--ref', type=str, default='/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/new_reference.fasta', help='the reference genome')
    parser.add_argument('-e', '--eps', type=int, default=EPSILON, help='width of window (epsilon)')
    parser.add_argument('--maxeps', type=int, default=MAX_EPS, help='maximum eps')
    parser.add_argument('--minps', type=float, default=CCM_MIN_PERCENTAGE_SUM, help='minimum per_sum')
    parser.add_argument('--es', type=float, default=EPSILON_SCALING_FACTOR, help='eps scaling factor')
    parser.add_argument('--exd', type=float, default=DIMINISHING_FACTOR, help='cluster expansion es diminishing factor')
    parser.add_argument('--minl', type=int, default=MIN_CLUSTER_LENGTH, help='minimum cluster length')

    args = parser.parse_args()

    info.fin = input_path if input_path else args.input_file
    info.ref = reference if reference else args.ref
    info.outdir = output_path if output_path else './output'

    if not exists(info.fin):
        print(f&#34;Input file does not exist: {info.fin}&#34;)
        exit()

    info.eps = args.eps
    info.maxeps = args.maxeps
    info.min_persum = args.minps
    info.eps_scaler_const = args.es
    info.es_control_const = args.exd
    info.min_cluster_length = args.minl

    return info
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/docs/study/algorithm/algo2/"><meta property="og:site_name" content=" "><meta property="og:title" content="MutClust 코드 리펙토링 #2 arg_parser"><meta property="og:description" content="MutClust 코드 리펙토링 #2 arg_parser # #2025-08-01
MutClust 알고리즘의 코드 구성은 아래와 같은데
MutClust ├── sc/ │ └── lib.py │ └── arg_parser.py // 실행 설정 │ └── utils.py └── Test arg_parser.py는 실험 환경 파라미터 세팅 및 CLI 인자 파싱을 포함한다.
# === arg_parser.py === import argparse from os.path import exists from src.mlib import ( DIMINISHING_FACTOR, EPSILON, EPSILON_SCALING_FACTOR, MAX_EPS, MIN_CLUSTER_LENGTH, CCM_MIN_PERCENTAGE_SUM ) class ArgsInfo: def __init__(self): self.args = {} self.fin = '' self.ref = '' self.outdir = '' self.eps = EPSILON self.maxeps = MAX_EPS self.min_persum = CCM_MIN_PERCENTAGE_SUM self.eps_scaler_const = EPSILON_SCALING_FACTOR self.es_control_const = DIMINISHING_FACTOR self.min_cluster_length = MIN_CLUSTER_LENGTH def set_env(input_path=None, reference=None, output_path=None): info = ArgsInfo() parser = argparse.ArgumentParser(prog=&#34;cluster.py&#34;) parser.add_argument('-f', '--input_file', type=str, default='/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/mutclust_input_data.txt', help='mutation frequency data file') parser.add_argument('-r', '--ref', type=str, default='/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/new_reference.fasta', help='the reference genome') parser.add_argument('-e', '--eps', type=int, default=EPSILON, help='width of window (epsilon)') parser.add_argument('--maxeps', type=int, default=MAX_EPS, help='maximum eps') parser.add_argument('--minps', type=float, default=CCM_MIN_PERCENTAGE_SUM, help='minimum per_sum') parser.add_argument('--es', type=float, default=EPSILON_SCALING_FACTOR, help='eps scaling factor') parser.add_argument('--exd', type=float, default=DIMINISHING_FACTOR, help='cluster expansion es diminishing factor') parser.add_argument('--minl', type=int, default=MIN_CLUSTER_LENGTH, help='minimum cluster length') args = parser.parse_args() info.fin = input_path if input_path else args.input_file info.ref = reference if reference else args.ref info.outdir = output_path if output_path else './output' if not exists(info.fin): print(f&#34;Input file does not exist: {info.fin}&#34;) exit() info.eps = args.eps info.maxeps = args.maxeps info.min_persum = args.minps info.eps_scaler_const = args.es info.es_control_const = args.exd info.min_cluster_length = args.minl return info"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-08-01T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-01T00:00:00+00:00"><meta property="article:tag" content="2025-08"><title>MutClust 코드 리펙토링 #2 arg_parser |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/docs/study/algorithm/algo2/><link rel=stylesheet href=/book.min.c1243161bf0533845410166eed8d51c01c88b7495cb920164aa7f624f5f1e66a.css integrity="sha256-wSQxYb8FM4RUEBZu7Y1RwByIt0lcuSAWSqf2JPXx5mo=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.c02a42b3ddacd36b2827d39b9ccf455baa12b9eb816cb519d6f1cb4ed42475a7.js integrity="sha256-wCpCs92s02soJ9ObnM9FW6oSueuBbLUZ1vHLTtQkdac=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>기록</span><ul><li><a href=/docs/hobby/book/>글</a><ul></ul></li><li><a href=/docs/hobby/daily/>일상</a><ul></ul></li></ul></li><li class=book-section-flat><span>공부</span><ul><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/ai/>AI</a><ul></ul></li><li><a href=/docs/study/sw/>SW</a><ul></ul></li><li><a href=/docs/study/algorithm/>알고리즘</a><ul></ul></li><li><a href=/docs/study/career/>취업</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>MutClust 코드 리펙토링 #2 arg_parser</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class="markdown book-article"><h1 id=mutclust-코드-리펙토링-2-arg_parser>MutClust 코드 리펙토링 #2 arg_parser
<a class=anchor href=#mutclust-%ec%bd%94%eb%93%9c-%eb%a6%ac%ed%8e%99%ed%86%a0%eb%a7%81-2-arg_parser>#</a></h1><p>#2025-08-01</p><hr><p>MutClust 알고리즘의 코드 구성은 아래와 같은데</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>MutClust
</span></span><span style=display:flex><span>├── sc/
</span></span><span style=display:flex><span>│    └── lib.py
</span></span><span style=display:flex><span>│    └── arg_parser.py // 실행 설정
</span></span><span style=display:flex><span>│    └── utils.py
</span></span><span style=display:flex><span>└── Test
</span></span></code></pre></div><p>arg_parser.py는 실험 환경 파라미터 세팅 및 CLI 인자 파싱을 포함한다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># === arg_parser.py ===</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> argparse
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> os.path <span style=color:#f92672>import</span> exists
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> src.mlib <span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    DIMINISHING_FACTOR, EPSILON, EPSILON_SCALING_FACTOR,
</span></span><span style=display:flex><span>    MAX_EPS, MIN_CLUSTER_LENGTH, CCM_MIN_PERCENTAGE_SUM
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ArgsInfo</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>args <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>fin <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>ref <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>outdir <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>eps <span style=color:#f92672>=</span> EPSILON
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>maxeps <span style=color:#f92672>=</span> MAX_EPS
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>min_persum <span style=color:#f92672>=</span> CCM_MIN_PERCENTAGE_SUM
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>eps_scaler_const <span style=color:#f92672>=</span> EPSILON_SCALING_FACTOR
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>es_control_const <span style=color:#f92672>=</span> DIMINISHING_FACTOR
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>min_cluster_length <span style=color:#f92672>=</span> MIN_CLUSTER_LENGTH
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>set_env</span>(input_path<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, reference<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, output_path<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>    info <span style=color:#f92672>=</span> ArgsInfo()
</span></span><span style=display:flex><span>    parser <span style=color:#f92672>=</span> argparse<span style=color:#f92672>.</span>ArgumentParser(prog<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cluster.py&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-f&#39;</span>, <span style=color:#e6db74>&#39;--input_file&#39;</span>, type<span style=color:#f92672>=</span>str, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/mutclust_input_data.txt&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;mutation frequency data file&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-r&#39;</span>, <span style=color:#e6db74>&#39;--ref&#39;</span>, type<span style=color:#f92672>=</span>str, default<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;/data3/projects/2020_MUTCLUST/Data/Rawdata/COVID19/nucleotide_data/new_reference.fasta&#39;</span>, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;the reference genome&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;-e&#39;</span>, <span style=color:#e6db74>&#39;--eps&#39;</span>, type<span style=color:#f92672>=</span>int, default<span style=color:#f92672>=</span>EPSILON, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;width of window (epsilon)&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--maxeps&#39;</span>, type<span style=color:#f92672>=</span>int, default<span style=color:#f92672>=</span>MAX_EPS, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;maximum eps&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--minps&#39;</span>, type<span style=color:#f92672>=</span>float, default<span style=color:#f92672>=</span>CCM_MIN_PERCENTAGE_SUM, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;minimum per_sum&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--es&#39;</span>, type<span style=color:#f92672>=</span>float, default<span style=color:#f92672>=</span>EPSILON_SCALING_FACTOR, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;eps scaling factor&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--exd&#39;</span>, type<span style=color:#f92672>=</span>float, default<span style=color:#f92672>=</span>DIMINISHING_FACTOR, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;cluster expansion es diminishing factor&#39;</span>)
</span></span><span style=display:flex><span>    parser<span style=color:#f92672>.</span>add_argument(<span style=color:#e6db74>&#39;--minl&#39;</span>, type<span style=color:#f92672>=</span>int, default<span style=color:#f92672>=</span>MIN_CLUSTER_LENGTH, help<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;minimum cluster length&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    args <span style=color:#f92672>=</span> parser<span style=color:#f92672>.</span>parse_args()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>fin <span style=color:#f92672>=</span> input_path <span style=color:#66d9ef>if</span> input_path <span style=color:#66d9ef>else</span> args<span style=color:#f92672>.</span>input_file
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>ref <span style=color:#f92672>=</span> reference <span style=color:#66d9ef>if</span> reference <span style=color:#66d9ef>else</span> args<span style=color:#f92672>.</span>ref
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>outdir <span style=color:#f92672>=</span> output_path <span style=color:#66d9ef>if</span> output_path <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#39;./output&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> exists(info<span style=color:#f92672>.</span>fin):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Input file does not exist: </span><span style=color:#e6db74>{</span>info<span style=color:#f92672>.</span>fin<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        exit()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>eps <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>eps
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>maxeps <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>maxeps
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>min_persum <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>minps
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>eps_scaler_const <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>es
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>es_control_const <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>exd
</span></span><span style=display:flex><span>    info<span style=color:#f92672>.</span>min_cluster_length <span style=color:#f92672>=</span> args<span style=color:#f92672>.</span>minl
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> info
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=yshghid/yshghid.github.io data-repo-id=R_kgDONkMkNg data-category-id=DIC_kwDONkMkNs4CloJh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents></nav></div></aside></main></body></html>