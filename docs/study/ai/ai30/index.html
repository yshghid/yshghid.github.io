<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°
  #

#2025-09-10



ìŠ¤í„°ë””í•˜ëŠ”ì¹œêµ¬ê°€ ë§Œë“¤ì–´ì¤€ì½”ë“œì¸ë° ë‚´ ë…¸ì…˜ìœ¼ë¡œ ëŒë ¤ë´¤ë‹¤!


ì‹¤ìŠµ ëª©ì 

ë…¸ì…˜ ë°ì´í„°ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ FAISS ë²¡í„° ìŠ¤í† ì–´ì— ì €ì¥í•˜ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì²­í‚¹ ê¸°ë²•ì„ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  LLM í”„ë¡¬í”„íŠ¸ ì œì•½ì„ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ ìë™ ë‹µë³€ êµ¬í˜„



ì‹¤ìŠµ ì„¤ê³„

ì„ë² ë”© ìƒì„±: SentenceTransformer(&ldquo;BAAI/bge-m3&rdquo;)
ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ + FAISS ë²¡í„° ìŠ¤í† ì–´ ê¸°ë°˜ ìµœê·¼ì ‘ íƒìƒ‰
ì²­í‚¹ ê¸°ë²•: Markdown ë‹¨ìœ„ ë¶„ë¦¬ + ê¸¸ì´ ê¸°ë°˜ ì¶”ê°€ ë¶„í• 
LLM í”„ë¡¬í”„íŠ¸ ì œì•½: ê·¼ê±° ê¸°ë°˜ ë‹µë³€(ì¶”ì¸¡ ê¸ˆì§€ ê·œì¹™ í¬í•¨)
ìë™ ë‹µë³€ êµ¬í˜„: RAG êµ¬ì¡° + &ldquo;meta-llama/llama-3.1-8b-instruct&rdquo;



ì‚¬ìš©í•œ ë…¸ì…˜ ë§í¬"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/docs/study/ai/ai30/"><meta property="og:site_name" content=" "><meta property="og:title" content="Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°"><meta property="og:description" content="Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸° # #2025-09-10
ìŠ¤í„°ë””í•˜ëŠ”ì¹œêµ¬ê°€ ë§Œë“¤ì–´ì¤€ì½”ë“œì¸ë° ë‚´ ë…¸ì…˜ìœ¼ë¡œ ëŒë ¤ë´¤ë‹¤!
ì‹¤ìŠµ ëª©ì 
ë…¸ì…˜ ë°ì´í„°ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ FAISS ë²¡í„° ìŠ¤í† ì–´ì— ì €ì¥í•˜ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì²­í‚¹ ê¸°ë²•ì„ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  LLM í”„ë¡¬í”„íŠ¸ ì œì•½ì„ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ ìë™ ë‹µë³€ êµ¬í˜„ ì‹¤ìŠµ ì„¤ê³„
ì„ë² ë”© ìƒì„±: SentenceTransformer(â€œBAAI/bge-m3â€) ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ + FAISS ë²¡í„° ìŠ¤í† ì–´ ê¸°ë°˜ ìµœê·¼ì ‘ íƒìƒ‰ ì²­í‚¹ ê¸°ë²•: Markdown ë‹¨ìœ„ ë¶„ë¦¬ + ê¸¸ì´ ê¸°ë°˜ ì¶”ê°€ ë¶„í•  LLM í”„ë¡¬í”„íŠ¸ ì œì•½: ê·¼ê±° ê¸°ë°˜ ë‹µë³€(ì¶”ì¸¡ ê¸ˆì§€ ê·œì¹™ í¬í•¨) ìë™ ë‹µë³€ êµ¬í˜„: RAG êµ¬ì¡° + â€œmeta-llama/llama-3.1-8b-instructâ€ ì‚¬ìš©í•œ ë…¸ì…˜ ë§í¬"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-09-10T00:00:00+00:00"><meta property="article:modified_time" content="2025-09-10T00:00:00+00:00"><meta property="article:tag" content="2025-09"><title>Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸° |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/docs/study/ai/ai30/><link rel=stylesheet href=/book.min.30a7836b6a89342da3b88e7afd1036166aeced16c8de12df060ded2031837886.css integrity="sha256-MKeDa2qJNC2juI56/RA2Fmrs7RbI3hLfBg3tIDGDeIY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.c7065a762617296840a74ee1e63866c98745dab743cbec395688ce7e9df187cc.js integrity="sha256-xwZadiYXKWhAp07h5jhmyYdF2rdDy+w5VojOfp3xh8w=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>ê¸°ë¡</span><ul><li><a href=/docs/hobby/daily/>ì¼ìƒ</a><ul></ul></li><li><a href=/docs/hobby/book/>ê¸€</a><ul></ul></li></ul></li><li class=book-section-flat><span>ê³µë¶€</span><ul><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/ai/>AI</a><ul></ul></li><li><a href=/docs/study/sw/>SW</a><ul></ul></li><li><a href=/docs/study/career/>ì·¨ì—…</a><ul></ul></li></ul></li><li><a href=/docs/portfolio/>#portfolio</a><ul></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#1-í™˜ê²½-ì¤€ë¹„>1. í™˜ê²½ ì¤€ë¹„</a></li><li></li><li><a href=#2-notion-api-ìœ í‹¸-í˜ì´ì§€db---markdown-í…ìŠ¤íŠ¸>2. Notion API ìœ í‹¸ (í˜ì´ì§€/DB -> Markdown í…ìŠ¤íŠ¸)</a></li><li></li><li><a href=#3-ëŒ€ìƒ-ì„ íƒ-ë°ì´í„°ë² ì´ìŠ¤-id-ë˜ëŠ”-ê°œë³„-í˜ì´ì§€-id>3. ëŒ€ìƒ ì„ íƒ: ë°ì´í„°ë² ì´ìŠ¤ ID ë˜ëŠ” ê°œë³„ í˜ì´ì§€ ID</a></li><li></li><li><a href=#4-notion---ë¬¸ì„œ-ë¦¬ìŠ¤íŠ¸-ë¡œë“œ>4. Notion -> ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ ë¡œë“œ</a></li><li></li><li><a href=#5-ì „ì²˜ë¦¬--ì²­í‚¹chunking>5. ì „ì²˜ë¦¬ & ì²­í‚¹(Chunking)</a></li><li></li><li><a href=#6-ì„ë² ë”©--ë²¡í„°-ì¸ë±ìŠ¤faiss>6. ì„ë² ë”© & ë²¡í„° ì¸ë±ìŠ¤(FAISS)</a></li><li></li><li><a href=#7-llm-í˜¸ì¶œopenai-í˜¸í™˜>7. LLM í˜¸ì¶œ(OpenAI í˜¸í™˜)</a></li><li></li><li><a href=#8-ì§ˆì˜---ê²€ìƒ‰---ë‹µë³€>8. ì§ˆì˜ -> ê²€ìƒ‰ -> ë‹µë³€</a></li><li></li><li><a href=#9-naive-ë°©ë²•ê³¼-ë¹„êµ>9. Naive ë°©ë²•ê³¼ ë¹„êµ</a></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=langchain-1-ìŠ¤í„°ë””-ë…¸ì…˜-ë°ì´í„°ë¡œ-ë‚˜ë§Œì˜-rag-ì‹œìŠ¤í…œ-êµ¬ì¶•í•˜ê¸°>Langchain #1 (ìŠ¤í„°ë””) ë…¸ì…˜ ë°ì´í„°ë¡œ ë‚˜ë§Œì˜ RAG ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ê¸°
<a class=anchor href=#langchain-1-%ec%8a%a4%ed%84%b0%eb%94%94-%eb%85%b8%ec%85%98-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%a1%9c-%eb%82%98%eb%a7%8c%ec%9d%98-rag-%ec%8b%9c%ec%8a%a4%ed%85%9c-%ea%b5%ac%ec%b6%95%ed%95%98%ea%b8%b0>#</a></h1><p>#2025-09-10</p><hr><ul><li><p>ìŠ¤í„°ë””í•˜ëŠ”ì¹œêµ¬ê°€ ë§Œë“¤ì–´ì¤€ì½”ë“œì¸ë° ë‚´ ë…¸ì…˜ìœ¼ë¡œ ëŒë ¤ë´¤ë‹¤!</p></li><li><p>ì‹¤ìŠµ ëª©ì </p><ul><li>ë…¸ì…˜ ë°ì´í„°ë¥¼ <mark>ì„ë² ë”© ìƒì„±</mark>í•˜ì—¬ FAISS ë²¡í„° ìŠ¤í† ì–´ì— ì €ì¥í•˜ê³  ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ <mark>ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰</mark>ì„ ìˆ˜í–‰í•˜ë©°, <mark>ì²­í‚¹ ê¸°ë²•</mark>ì„ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  <mark>LLM í”„ë¡¬í”„íŠ¸ ì œì•½</mark>ì„ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ <mark>ìë™ ë‹µë³€ êµ¬í˜„</mark></li></ul></li><li><p>ì‹¤ìŠµ ì„¤ê³„</p><ul><li><mark>ì„ë² ë”© ìƒì„±</mark>: SentenceTransformer(&ldquo;BAAI/bge-m3&rdquo;)</li><li><mark>ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰</mark>: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ + FAISS ë²¡í„° ìŠ¤í† ì–´ ê¸°ë°˜ ìµœê·¼ì ‘ íƒìƒ‰</li><li><mark>ì²­í‚¹ ê¸°ë²•</mark>: Markdown ë‹¨ìœ„ ë¶„ë¦¬ + ê¸¸ì´ ê¸°ë°˜ ì¶”ê°€ ë¶„í• </li><li><mark>LLM í”„ë¡¬í”„íŠ¸ ì œì•½</mark>: ê·¼ê±° ê¸°ë°˜ ë‹µë³€(ì¶”ì¸¡ ê¸ˆì§€ ê·œì¹™ í¬í•¨)</li><li><mark>ìë™ ë‹µë³€ êµ¬í˜„</mark>: RAG êµ¬ì¡° + &ldquo;meta-llama/llama-3.1-8b-instruct&rdquo;</li></ul></li><li><p>ì‚¬ìš©í•œ ë…¸ì…˜ ë§í¬</p><ul><li>SQL ì‹¤ìŠµ 4ê°œ<ul><li>DBMS ë° SQL í™œìš© #4 <a href="https://open-trust-407.notion.site/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048?source=copy_link">https://open-trust-407.notion.site/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048?source=copy_link</a></li><li>DBMS ë° SQL í™œìš© #5 <a href="https://open-trust-407.notion.site/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad?source=copy_link">https://open-trust-407.notion.site/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad?source=copy_link</a></li><li>DBMS ë° SQL í™œìš© #6 <a href="https://open-trust-407.notion.site/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f?source=copy_link">https://open-trust-407.notion.site/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f?source=copy_link</a></li><li>DBMS ë° SQL í™œìš© #7 <a href="https://open-trust-407.notion.site/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc?source=copy_link">https://open-trust-407.notion.site/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc?source=copy_link</a></li></ul></li></ul></li></ul><h3><a class=anchor href=#>#</a></h3><h3 id=1-í™˜ê²½-ì¤€ë¹„>1. í™˜ê²½ ì¤€ë¹„
<a class=anchor href=#1-%ed%99%98%ea%b2%bd-%ec%a4%80%eb%b9%84>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 0) Install deps</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>!</span>pip <span style=color:#f92672>-</span>q install notion<span style=color:#f92672>-</span>client sentence<span style=color:#f92672>-</span>transformers faiss<span style=color:#f92672>-</span>cpu openai python<span style=color:#f92672>-</span>dotenv
</span></span></code></pre></div><ul><li>notion-client<ul><li>ë…¸ì…˜ í˜ì´ì§€ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¬ë•Œ ë…¸ì…˜ APIì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬</li></ul></li><li>sentence-transformers<ul><li>í…ìŠ¤íŠ¸ë¥¼ ë²¡í„°ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì„ë² ë”© ëª¨ë¸</li></ul></li><li>faiss-cpu<ul><li>ëŒ€ê·œëª¨ ë²¡í„° ê²€ìƒ‰ì„ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ í˜ì´ìŠ¤ë¶ AIì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬</li></ul></li><li>openai<ul><li>LLMì„ í˜¸ì¶œí•˜ëŠ”ë° ì‚¬ìš© ì—¬ê¸°ì„œëŠ” OpenRouterë¥¼ í†µí•´ OpenAI APIì™€ í˜¸í™˜ë˜ëŠ” ë°©ì‹ìœ¼ë¡œ LLMì„ ë¶€ë¥¸ë‹¤.</li></ul></li><li>python-dotenv<ul><li>.env íŒŒì¼ì—ì„œ API í‚¤ë‚˜ í† í° ê°™ì€ ë¯¼ê°í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë¡œë“œ</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> dotenv <span style=color:#f92672>import</span> load_dotenv
</span></span><span style=display:flex><span>load_dotenv()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># --- Notion ---</span>
</span></span><span style=display:flex><span>NOTION_TOKEN <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#75715e>#&#39;ntn_xxx&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># --- LLM (OpenAI-í˜¸í™˜) ---</span>
</span></span><span style=display:flex><span>API_KEY <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#75715e># &#39;sk-or-v1-xxx&#39;</span>
</span></span><span style=display:flex><span>BASE_URL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://openrouter.ai/api/v1&#34;</span>
</span></span><span style=display:flex><span>MODEL_NAME <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;meta-llama/llama-3.1-8b-instruct&#34;</span>
</span></span></code></pre></div><ul><li>NOTION_TOKEN<ul><li>ë…¸ì…˜ ê°œë°œì ì„¤ì •ì—ì„œ ë°œê¸‰ë°›ì€ í†µí•© í† í°, ë…¸ì…˜ í˜ì´ì§€ì™€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í• ë•Œ í•„ìš”</li><li>ë°œê¸‰ë°›ëŠ”ë²•: <a href=https://www.notion.so/profile/integrations>https://www.notion.so/profile/integrations</a> ì—ì„œ ìƒˆ API í†µí•© > ì´ë¦„ ì…ë ¥(test) > ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„ íƒ(ìœ¤ì†Œí˜„ì˜ Notion) > ìœ í˜• ì„ íƒ(í”„ë¼ì´ë¹—)</li></ul></li><li>API_KEY<ul><li>OpenRouter ë˜ëŠ” OpenAIì—ì„œ ë°œê¸‰ë°›ì€ í‚¤, LLMì„ í˜¸ì¶œí•  ë•Œ í•„ìš”</li><li>ë°œê¸‰ë°›ëŠ”ë²•: <a href=https://openrouter.ai/>https://openrouter.ai/</a> ì—ì„œ ë°œê¸‰ë°›ìŒ</li></ul></li><li>MODEL<ul><li>ì‚¬ìš©í•  LLMì˜ ì´ë¦„</li></ul></li><li>EMB_MODEL<ul><li>ì„ë² ë”© ê³„ì‚°ì— ì“¸ ì‚¬ì „í•™ìŠµëœ ë¬¸ì¥ ë³€í™˜ê¸° ëª¨ë¸ ì´ë¦„</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># --- Embedding ---</span>
</span></span><span style=display:flex><span>EMB_MODEL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;BAAI/bge-m3&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print({
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;NOTION_TOKEN&#34;</span>: bool(NOTION_TOKEN),
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;BASE_URL&#34;</span>: BASE_URL,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;MODEL_NAME&#34;</span>: MODEL_NAME,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;EMB_MODEL&#34;</span>: EMB_MODEL,
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>{&#39;NOTION_TOKEN&#39;: True, &#39;BASE_URL&#39;: &#39;https://openrouter.ai/api/v1&#39;, &#39;MODEL_NAME&#39;: &#39;meta-llama/llama-3.1-8b-instruct&#39;, &#39;EMB_MODEL&#39;: &#39;BAAI/bge-m3&#39;}
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=2-notion-api-ìœ í‹¸-í˜ì´ì§€db---markdown-í…ìŠ¤íŠ¸>2. Notion API ìœ í‹¸ (í˜ì´ì§€/DB -> Markdown í…ìŠ¤íŠ¸)
<a class=anchor href=#2-notion-api-%ec%9c%a0%ed%8b%b8-%ed%8e%98%ec%9d%b4%ec%a7%80db---markdown-%ed%85%8d%ec%8a%a4%ed%8a%b8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> notion_client <span style=color:#f92672>import</span> Client
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re<span style=color:#f92672>,</span> textwrap<span style=color:#f92672>,</span> hashlib
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> typing <span style=color:#f92672>import</span> List, Dict
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> NOTION_TOKEN:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>RuntimeError</span>(<span style=color:#e6db74>&#34;NOTION_TOKENì´ í•„ìš”í•©ë‹ˆë‹¤.&#34;</span>)
</span></span><span style=display:flex><span>nclient <span style=color:#f92672>=</span> Client(auth<span style=color:#f92672>=</span>NOTION_TOKEN)
</span></span></code></pre></div><ul><li>nclient = Client(auth=NOTION_TOKEN)<ul><li>ë…¸ì…˜ APIì™€ ì—°ê²°í•  í´ë¼ì´ì–¸íŠ¸ë¥¼ ìƒì„± -> í´ë¼ì´ì–¸íŠ¸ë¥¼ í†µí•´ ë…¸ì…˜ ë¸”ë¡ ë‹¨ìœ„ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_pt</span>(rt_list):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>.</span>join([t<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;plain_text&#34;</span>,<span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#66d9ef>for</span> t <span style=color:#f92672>in</span> (rt_list <span style=color:#f92672>or</span> [])])
</span></span></code></pre></div><ul><li>ë…¸ì…˜ì˜ í…ìŠ¤íŠ¸ ë°ì´í„°ëŠ” ë‹¨ìˆœ ë¬¸ìì—´ì´ ì•„ë‹ˆë¼ rich_textë¼ëŠ” êµ¬ì¡°ì²´ ì•ˆì— ì—¬ëŸ¬ ì¡°ê°ì´ ë“¤ì–´ìˆê³  _pt í•¨ìˆ˜ëŠ” ê·¸ ì•ˆì—ì„œ &ldquo;plain_text"ë¼ëŠ” ë¶€ë¶„ë§Œ êº¼ë‚´ ë¶™ì¸ë‹¤.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_flatten_block</span>(block):
</span></span><span style=display:flex><span>    t <span style=color:#f92672>=</span> block[<span style=color:#e6db74>&#34;type&#34;</span>]
</span></span><span style=display:flex><span>    b <span style=color:#f92672>=</span> block[t]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;paragraph&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t<span style=color:#f92672>.</span>endswith(<span style=color:#e6db74>&#34;_heading&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;# &#34;</span> <span style=color:#f92672>+</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>in</span> (<span style=color:#e6db74>&#34;bulleted_list_item&#34;</span>,<span style=color:#e6db74>&#34;numbered_list_item&#34;</span>,<span style=color:#e6db74>&#34;to_do&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;- &#34;</span> <span style=color:#f92672>+</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;quote&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&gt; &#34;</span> <span style=color:#f92672>+</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;code&#34;</span>:
</span></span><span style=display:flex><span>        txt <span style=color:#f92672>=</span> b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>, [{}])[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;plain_text&#34;</span>,<span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>        lang <span style=color:#f92672>=</span> b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;language&#34;</span>,<span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;```</span><span style=color:#e6db74>{</span>lang<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>+</span>txt<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>```&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;callout&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;ğŸ’¡ &#34;</span> <span style=color:#f92672>+</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;toggle&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> _pt(b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;rich_text&#34;</span>))  <span style=color:#75715e># childrenë¡œ í™•ì¥</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;equation&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;expression&#34;</span>,<span style=color:#e6db74>&#34;&#34;</span>) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;table_row&#34;</span>:
</span></span><span style=display:flex><span>        cells <span style=color:#f92672>=</span> [ _pt(cell) <span style=color:#66d9ef>for</span> cell <span style=color:#f92672>in</span> b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;cells&#34;</span>, []) ]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34; | &#34;</span><span style=color:#f92672>.</span>join(cells)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span></code></pre></div><ul><li>_flatten_block(block)<ul><li>ë…¸ì…˜ ë¸”ë¡ì„ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ìœ¼ë¡œ í‘œí˜„</li><li>ë¸”ë¡ íƒ€ì…ë³„ë¡œ ë‹¤ë¥´ê²Œ ì²˜ë¦¬<ul><li>&ldquo;paragraph&rdquo;: í…ìŠ¤íŠ¸ì¶”ì¶œ</li><li>&ldquo;heading&rdquo;: ì œëª©ì´ë¼ëŠ” ì˜ë¯¸ë¡œ #ì„ ë¶™ì„</li><li>&ldquo;bulleted_list_item&rdquo; &ldquo;numbered_list_item&rdquo;: ë¦¬ìŠ¤íŠ¸ í•­ëª©ì´ë¯€ë¡œ - ê¸°í˜¸ë¥¼ ë¶™ì„</li><li>&ldquo;quote&rdquo;: ì¸ìš©ë¬¸ í‘œì‹œ ></li><li>&ldquo;code&rdquo;: ì–¸ì–´ ì´ë¦„ê³¼ í•¨ê»˜ ì½”ë“œ ë¸”ë¡ í˜•íƒœë¡œ ë³€í™˜</li><li>&ldquo;callout&rdquo;: ì•„ì´ë””ì–´ ë°•ìŠ¤ì´ë¯€ë¡œ ğŸ’¡ ì´ëª¨ì§€</li><li>&ldquo;equation&rdquo;: ìˆ˜ì‹ í‘œì‹œ $ &mldr; $ë¡œ ê°ì‹¸ê¸°</li><li>&ldquo;table_row"ëŠ” ì…€ì„ | ê¸°í˜¸ë¡œ êµ¬ë¶„í•´ í…Œì´ë¸” í–‰ìœ¼ë¡œ ë°”ê¾¸ê¸°</li><li>ì•Œ ìˆ˜ ì—†ëŠ” ë¸”ë¡ íƒ€ì…ì´ë©´ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜</li></ul></li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_walk_children</span>(block_id, acc: List[str]):
</span></span><span style=display:flex><span>    children <span style=color:#f92672>=</span> nclient<span style=color:#f92672>.</span>blocks<span style=color:#f92672>.</span>children<span style=color:#f92672>.</span>list(block_id<span style=color:#f92672>=</span>block_id)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> b <span style=color:#f92672>in</span> children[<span style=color:#e6db74>&#34;results&#34;</span>]:
</span></span><span style=display:flex><span>            acc<span style=color:#f92672>.</span>append(_flatten_block(b))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> b<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;has_children&#34;</span>):
</span></span><span style=display:flex><span>                _walk_children(b[<span style=color:#e6db74>&#34;id&#34;</span>], acc)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> children<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;has_more&#34;</span>): <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>        children <span style=color:#f92672>=</span> nclient<span style=color:#f92672>.</span>blocks<span style=color:#f92672>.</span>children<span style=color:#f92672>.</span>list(block_id<span style=color:#f92672>=</span>block_id, start_cursor<span style=color:#f92672>=</span>children[<span style=color:#e6db74>&#34;next_cursor&#34;</span>])
</span></span></code></pre></div><ul><li>_walk_children(block_id, acc)<ul><li>ë…¸ì…˜ í˜ì´ì§€ëŠ” íŠ¸ë¦¬ êµ¬ì¡°ë¡œ ë˜ì–´ ìˆê³  í•˜ë‚˜ì˜ ë¸”ë¡ì´ ì•ˆì— ë˜ ë‹¤ë¥¸ ë¸”ë¡ë“¤ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ”ë° ì¬ê·€ì ìœ¼ë¡œ ë¸”ë¡ì˜ ìì‹ë“¤ì„ íƒìƒ‰</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># í˜ì´ì§€ë¥¼ ì¬ê·€ë¡œ ìˆœíšŒí•´ í…ìŠ¤íŠ¸í™”</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>notion_page_to_markdown</span>(page_id: str) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    out<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span>    _walk_children(page_id, out)
</span></span><span style=display:flex><span>    md <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(filter(<span style=color:#66d9ef>None</span>,out))<span style=color:#f92672>.</span>strip()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_page_meta</span>(page: Dict) <span style=color:#f92672>-&gt;</span> Dict:
</span></span><span style=display:flex><span>    <span style=color:#75715e># title property ì°¾ê¸°</span>
</span></span><span style=display:flex><span>    props <span style=color:#f92672>=</span> page<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;properties&#34;</span>, {})
</span></span><span style=display:flex><span>    title_prop <span style=color:#f92672>=</span> next((v <span style=color:#66d9ef>for</span> v <span style=color:#f92672>in</span> props<span style=color:#f92672>.</span>values() <span style=color:#66d9ef>if</span> v<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;type&#34;</span>)<span style=color:#f92672>==</span><span style=color:#e6db74>&#34;title&#34;</span>), <span style=color:#66d9ef>None</span>)
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> _pt((title_prop <span style=color:#f92672>or</span> {})<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;title&#34;</span>, [])) <span style=color:#f92672>or</span> page<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;id&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;page_id&#34;</span>: page[<span style=color:#e6db74>&#34;id&#34;</span>],
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;title&#34;</span>: title,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;url&#34;</span>: page<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;url&#34;</span>),
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;last_edited_time&#34;</span>: page<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;last_edited_time&#34;</span>),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># DBì˜ ê° í˜ì´ì§€ë¥¼ ìœ„ í•¨ìˆ˜ë¡œ ë³€í™˜</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fetch_pages_from_database</span>(database_id: str) <span style=color:#f92672>-&gt;</span> List[Dict]:
</span></span><span style=display:flex><span>    results<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> nclient<span style=color:#f92672>.</span>databases<span style=color:#f92672>.</span>query(database_id<span style=color:#f92672>=</span>database_id, page_size<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> page <span style=color:#f92672>in</span> resp[<span style=color:#e6db74>&#34;results&#34;</span>]:
</span></span><span style=display:flex><span>            meta <span style=color:#f92672>=</span> get_page_meta(page)
</span></span><span style=display:flex><span>            md <span style=color:#f92672>=</span> notion_page_to_markdown(page[<span style=color:#e6db74>&#34;id&#34;</span>])
</span></span><span style=display:flex><span>            results<span style=color:#f92672>.</span>append({<span style=color:#f92672>**</span>meta, <span style=color:#e6db74>&#34;content_md&#34;</span>: md})
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> resp<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;has_more&#34;</span>): <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>        resp <span style=color:#f92672>=</span> nclient<span style=color:#f92672>.</span>databases<span style=color:#f92672>.</span>query(database_id<span style=color:#f92672>=</span>database_id, page_size<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, start_cursor<span style=color:#f92672>=</span>resp[<span style=color:#e6db74>&#34;next_cursor&#34;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> results
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ë‹¨ì¼ í˜ì´ì§€ ë³€í™˜</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fetch_single_page</span>(page_id: str) <span style=color:#f92672>-&gt;</span> Dict:
</span></span><span style=display:flex><span>    page <span style=color:#f92672>=</span> nclient<span style=color:#f92672>.</span>pages<span style=color:#f92672>.</span>retrieve(page_id<span style=color:#f92672>=</span>page_id)
</span></span><span style=display:flex><span>    meta <span style=color:#f92672>=</span> get_page_meta(page)
</span></span><span style=display:flex><span>    md <span style=color:#f92672>=</span> notion_page_to_markdown(page_id)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> {<span style=color:#f92672>**</span>meta, <span style=color:#e6db74>&#34;content_md&#34;</span>: md}
</span></span></code></pre></div><ul><li>notion_page_to_markdown(page_id)<ul><li>ë…¸ì…˜ í˜ì´ì§€ í•˜ë‚˜ë¥¼ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ë¡œ ë³€í™˜</li></ul></li><li>get_page_meta(page)<ul><li>í˜ì´ì§€ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ. ë…¸ì…˜ì˜ í˜ì´ì§€ê°€ ê°–ëŠ” ì†Œê²ƒã…‡ ì¤‘ &ldquo;title&rdquo;, í˜ì´ì§€ ID, ì œëª©, URL, ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„(last_edited_time) ì •ë³´ë¥¼ ë”•ì…”ë„ˆë¦¬ë¡œ ë§Œë“¤ê³  ì´ ë”•ì…”ë„ˆë¦¬ëŠ” ë‚˜ì¤‘ì— ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë•Œ ì¶œì²˜ë¥¼ í‘œì‹œí•˜ëŠ” ë° ì“°ì¸ë‹¤.</li></ul></li><li>fetch_pages_from_database(database_id)<ul><li>ë°ì´í„°ë² ì´ìŠ¤ ì „ì²´ í˜ì´ì§€ê°€ ë§ˆí¬ë‹¤ìš´ê³¼ ë©”íƒ€ì •ë³´ë¡œ ë³€í™˜</li></ul></li><li>fetch_single_page(page_id)<ul><li>ë°ì´í„°ë² ì´ìŠ¤ ì „ì²´ê°€ ì•„ë‹ˆë¼ íŠ¹ì • ë‹¨ì¼ í˜ì´ì§€ë¥¼ ë§ˆí¬ë‹¤ìš´ê³¼ ë©”íƒ€ì •ë³´ë¡œ ë³€í™˜</li></ul></li></ul><h3><a class=anchor href=#>#</a></h3><h3 id=3-ëŒ€ìƒ-ì„ íƒ-ë°ì´í„°ë² ì´ìŠ¤-id-ë˜ëŠ”-ê°œë³„-í˜ì´ì§€-id>3. ëŒ€ìƒ ì„ íƒ: ë°ì´í„°ë² ì´ìŠ¤ ID ë˜ëŠ” ê°œë³„ í˜ì´ì§€ ID
<a class=anchor href=#3-%eb%8c%80%ec%83%81-%ec%84%a0%ed%83%9d-%eb%8d%b0%ec%9d%b4%ed%84%b0%eb%b2%a0%ec%9d%b4%ec%8a%a4-id-%eb%98%90%eb%8a%94-%ea%b0%9c%eb%b3%84-%ed%8e%98%ec%9d%b4%ec%a7%80-id>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># ì˜ˆì‹œ: í•˜ë‚˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê¸ì–´ì˜¤ê±°ë‚˜, ê°œë³„ í˜ì´ì§€ë“¤ì„ ëª¨ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
</span></span><span style=display:flex><span>DATABASE_IDS <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e># &#34;264bf0ad3a0680e18fedda127323e553&#34;,</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># &#34;1c2bf0ad3a06803eab94dae2a4d81272&#34;,</span>
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>PAGE_IDS <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;25e766ec-530e-808f-a0fa-d5bebba25048&#34;</span>,  <span style=color:#75715e># ì‹¤ìŠµ4</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;25e766ec-530e-806f-ab58-f2097b0866ad&#34;</span>,  <span style=color:#75715e># ì‹¤ìŠµ5</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;25e766ec-530e-8022-b72d-ea09a26b195f&#34;</span>,  <span style=color:#75715e># ì‹¤ìŠµ6</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;25f766ec-530e-80bd-a9a3-efece96453bc&#34;</span>   <span style=color:#75715e># ì‹¤ìŠµ7</span>
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><ul><li>DBMS ë° SQL í™œìš© ì‹¤ìŠµ4-7ì„ ì‚¬ìš©í•´ë³´ê¸°.<ul><li>ì‹¤ìŠµ4 - <a href="https://www.notion.so/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048?source=copy_link">https://www.notion.so/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048?source=copy_link</a></li><li>ì‹¤ìŠµ5 - <a href="https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad?source=copy_link">https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad?source=copy_link</a></li><li>ì‹¤ìŠµ6 - <a href="https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f?source=copy_link">https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f?source=copy_link</a></li><li>ì‹¤ìŠµ7 - <a href="https://www.notion.so/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc?source=copy_link">https://www.notion.so/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc?source=copy_link</a></li></ul></li><li>í˜ì´ì§€ë“¤ì„ Notion Integration(ë‚´ í†µí•© ì•±)ì— ê³µìœ í•´ì•¼ APIë¡œ ì ‘ê·¼í• ìˆ˜ìˆë‹¤.</li></ul><h3><a class=anchor href=#>#</a></h3><h3 id=4-notion---ë¬¸ì„œ-ë¦¬ìŠ¤íŠ¸-ë¡œë“œ>4. Notion -> ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ ë¡œë“œ
<a class=anchor href=#4-notion---%eb%ac%b8%ec%84%9c-%eb%a6%ac%ec%8a%a4%ed%8a%b8-%eb%a1%9c%eb%93%9c>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>docs <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> dbid <span style=color:#f92672>in</span> DATABASE_IDS:
</span></span><span style=display:flex><span>    docs <span style=color:#f92672>+=</span> fetch_pages_from_database(dbid)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> pid <span style=color:#f92672>in</span> PAGE_IDS:
</span></span><span style=display:flex><span>    docs<span style=color:#f92672>.</span>append(fetch_single_page(pid))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>len(docs), [ (d[<span style=color:#e6db74>&#39;title&#39;</span>], d[<span style=color:#e6db74>&#39;url&#39;</span>]) <span style=color:#66d9ef>for</span> d <span style=color:#f92672>in</span> docs[:<span style=color:#ae81ff>5</span>] ]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>(4,
</span></span><span style=display:flex><span> [(&#39;DBMS ë° SQL í™œìš© #4&#39;,
</span></span><span style=display:flex><span>   &#39;https://www.notion.so/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048&#39;),
</span></span><span style=display:flex><span>  (&#39;DBMS ë° SQL í™œìš© #5&#39;,
</span></span><span style=display:flex><span>   &#39;https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad&#39;),
</span></span><span style=display:flex><span>  (&#39;DBMS ë° SQL í™œìš© #6&#39;,
</span></span><span style=display:flex><span>   &#39;https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f&#39;),
</span></span><span style=display:flex><span>  (&#39;DBMS ë° SQL í™œìš© #7&#39;,
</span></span><span style=display:flex><span>   &#39;https://www.notion.so/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc&#39;)])
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>docs
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>[{&#39;page_id&#39;: &#39;25e766ec-530e-808f-a0fa-d5bebba25048&#39;,
</span></span><span style=display:flex><span>  &#39;title&#39;: &#39;DBMS ë° SQL í™œìš© #4&#39;,
</span></span><span style=display:flex><span>  &#39;url&#39;: &#39;https://www.notion.so/DBMS-SQL-4-25e766ec530e808fa0fad5bebba25048&#39;,
</span></span><span style=display:flex><span>  &#39;last_edited_time&#39;: &#39;2025-09-09T23:48:00.000Z&#39;,
</span></span><span style=display:flex><span>  &#39;content_md&#39;: &#39;ë¬¸ì œ\nì‹¤ìŠµ ê°œìš”\n- ë°ì´í„°\n- ì‚¬ìš©ìì˜ ë‚˜ì´, ì†Œë“, ì„±ë³„, ì†Œë¹„ ì„±í–¥, ë°©ë¬¸ íšŸìˆ˜\n- ëª©ì \n- ì‚¬ìš©ìì˜ ì†ì„±(ì˜ˆ: ë‚˜ì´, ì†Œë“, ì†Œë¹„ ì„±í–¥ ë“±)ì„ ë²¡í„° ê³µê°„ì— ì„ë² ë”©í•˜ì—¬, ...},
</span></span><span style=display:flex><span> {&#39;page_id&#39;: &#39;25e766ec-530e-806f-ab58-f2097b0866ad&#39;,
</span></span><span style=display:flex><span>  &#39;title&#39;: &#39;DBMS ë° SQL í™œìš© #5&#39;,
</span></span><span style=display:flex><span>  &#39;url&#39;: &#39;https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad&#39;,
</span></span><span style=display:flex><span>  &#39;last_edited_time&#39;: &#39;2025-09-09T23:49:00.000Z&#39;,
</span></span><span style=display:flex><span>  &#39;content_md&#39;: &#39;ë¬¸ì œ\nì‹¤ìŠµ ê°œìš”\n- ì‹¤ìŠµ ëª©ì \n- í…ìŠ¤íŠ¸ ë°ì´í„°(GitHub Issues)ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ PostgreSQL + pgvectorì— ì €ì¥í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì‹œê°í™”ë¥¼ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ...},
</span></span><span style=display:flex><span>  {&#39;page_id&#39;: &#39;25e766ec-530e-8022-b72d-ea09a26b195f&#39;,
</span></span><span style=display:flex><span>  &#39;title&#39;: &#39;DBMS ë° SQL í™œìš© #6&#39;,
</span></span><span style=display:flex><span>  &#39;url&#39;: &#39;https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f&#39;,
</span></span><span style=display:flex><span>  &#39;last_edited_time&#39;: &#39;2025-09-09T23:49:00.000Z&#39;,
</span></span><span style=display:flex><span>  &#39;content_md&#39;: &#39;ë¬¸ì œ\nì‹¤ìŠµ ê°œìš”\n- ì‹¤ìŠµ ëª©ì \n- í…ìŠ¤íŠ¸ ë°ì´í„°(GitHub Issues)ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ PostgreSQL + pgvectorì— ì €ì¥í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì‹œê°í™”ë¥¼ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ...},
</span></span><span style=display:flex><span>  {&#39;page_id&#39;: &#39;25f766ec-530e-80bd-a9a3-efece96453bc&#39;,
</span></span><span style=display:flex><span>  &#39;title&#39;: &#39;DBMS ë° SQL í™œìš© #7&#39;,
</span></span><span style=display:flex><span>  &#39;url&#39;: &#39;https://www.notion.so/DBMS-SQL-7-25f766ec530e80bda9a3efece96453bc&#39;,
</span></span><span style=display:flex><span>  &#39;last_edited_time&#39;: &#39;2025-09-09T23:49:00.000Z&#39;,
</span></span><span style=display:flex><span>  &#39;content_md&#39;: &#39;ë¬¸ì œ\n```plain text\n# 1. DB ìƒì„±, ë°ì´í„° ì‚½ì…\n-- DB ìƒì„±\nCREATE DATABASE company;\n\n-- DB ì ‘ì†\n\\c company\n\n-- í…Œì´ë¸” ìƒì„±\nCREATE TABLE employee ...}]
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=5-ì „ì²˜ë¦¬--ì²­í‚¹chunking>5. ì „ì²˜ë¦¬ & ì²­í‚¹(Chunking)
<a class=anchor href=#5-%ec%a0%84%ec%b2%98%eb%a6%ac--%ec%b2%ad%ed%82%b9chunking>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>split_markdown</span>(md: str, max_len<span style=color:#f92672>=</span><span style=color:#ae81ff>900</span>):
</span></span><span style=display:flex><span>parts<span style=color:#f92672>=</span>[]; buf<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> md<span style=color:#f92672>.</span>splitlines():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> re<span style=color:#f92672>.</span><span style=color:#66d9ef>match</span>(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;^#{1,6}\s&#34;</span>, line) <span style=color:#f92672>and</span> buf:
</span></span><span style=display:flex><span>        chunk<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(buf)<span style=color:#f92672>.</span>strip()
</span></span><span style=display:flex><span>        parts <span style=color:#f92672>+=</span> textwrap<span style=color:#f92672>.</span>wrap(chunk, max_len, break_long_words<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, break_on_hyphens<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>) <span style=color:#66d9ef>if</span> len(chunk)<span style=color:#f92672>&gt;</span>max_len <span style=color:#66d9ef>else</span> [chunk]
</span></span><span style=display:flex><span>        buf<span style=color:#f92672>=</span>[line]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        buf<span style=color:#f92672>.</span>append(line)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> buf:
</span></span><span style=display:flex><span>    chunk<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(buf)<span style=color:#f92672>.</span>strip()
</span></span><span style=display:flex><span>    parts <span style=color:#f92672>+=</span> textwrap<span style=color:#f92672>.</span>wrap(chunk, max_len, break_long_words<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, break_on_hyphens<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>) <span style=color:#66d9ef>if</span> len(chunk)<span style=color:#f92672>&gt;</span>max_len <span style=color:#66d9ef>else</span> [chunk]
</span></span><span style=display:flex><span><span style=color:#66d9ef>return</span> [p <span style=color:#66d9ef>for</span> p <span style=color:#f92672>in</span> parts <span style=color:#66d9ef>if</span> p<span style=color:#f92672>.</span>strip()]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chunks<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span>metas<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> d <span style=color:#f92672>in</span> docs:
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> ch <span style=color:#f92672>in</span> split_markdown(d[<span style=color:#e6db74>&#34;content_md&#34;</span>]):
</span></span><span style=display:flex><span>    metas<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#34;page_id&#34;</span>: d[<span style=color:#e6db74>&#34;page_id&#34;</span>], <span style=color:#e6db74>&#34;title&#34;</span>: d[<span style=color:#e6db74>&#34;title&#34;</span>], <span style=color:#e6db74>&#34;url&#34;</span>: d<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;url&#34;</span>), <span style=color:#e6db74>&#34;section&#34;</span>: <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;text&#34;</span>: ch})
</span></span><span style=display:flex><span>    chunks<span style=color:#f92672>.</span>append(ch)
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=6-ì„ë² ë”©--ë²¡í„°-ì¸ë±ìŠ¤faiss>6. ì„ë² ë”© & ë²¡í„° ì¸ë±ìŠ¤(FAISS)
<a class=anchor href=#6-%ec%9e%84%eb%b2%a0%eb%94%a9--%eb%b2%a1%ed%84%b0-%ec%9d%b8%eb%8d%b1%ec%8a%a4faiss>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> sentence_transformers <span style=color:#f92672>import</span> SentenceTransformer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>e_model <span style=color:#f92672>=</span> SentenceTransformer(EMB_MODEL)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>embed</span>(texts):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> e_model<span style=color:#f92672>.</span>encode(texts, normalize_embeddings<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, convert_to_numpy<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)<span style=color:#f92672>.</span>astype(<span style=color:#e6db74>&#34;float32&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vecs <span style=color:#f92672>=</span> embed(chunks)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np<span style=color:#f92672>,</span> faiss
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FaissStore</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, dim):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>index <span style=color:#f92672>=</span> faiss<span style=color:#f92672>.</span>IndexFlatIP(dim)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>meta <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add</span>(self, vecs, metas):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>index<span style=color:#f92672>.</span>add(vecs)    <span style=color:#75715e># í•™ìŠµ ë¶ˆí•„ìš”, ë°”ë¡œ ì¶”ê°€</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>meta <span style=color:#f92672>+=</span> metas
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>search</span>(self, qvec, k<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>):
</span></span><span style=display:flex><span>        D,I <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>index<span style=color:#f92672>.</span>search(np<span style=color:#f92672>.</span>array([qvec])<span style=color:#f92672>.</span>astype(<span style=color:#e6db74>&#34;float32&#34;</span>), k)  <span style=color:#75715e># ìœ ì‚¬ë„ ë†’ì€ ìƒìœ„ kê°œ</span>
</span></span><span style=display:flex><span>        out<span style=color:#f92672>=</span>[]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> rank, idx <span style=color:#f92672>in</span> enumerate(I[<span style=color:#ae81ff>0</span>]):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> idx <span style=color:#f92672>==</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>: <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>            m <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>meta[idx]
</span></span><span style=display:flex><span>            out<span style=color:#f92672>.</span>append({<span style=color:#e6db74>&#34;text&#34;</span>: m[<span style=color:#e6db74>&#34;text&#34;</span>], <span style=color:#e6db74>&#34;meta&#34;</span>: {k:v <span style=color:#66d9ef>for</span> k,v <span style=color:#f92672>in</span> m<span style=color:#f92672>.</span>items() <span style=color:#66d9ef>if</span> k<span style=color:#f92672>!=</span><span style=color:#e6db74>&#34;text&#34;</span>}, <span style=color:#e6db74>&#34;score&#34;</span>: float(D[<span style=color:#ae81ff>0</span>][rank])})
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> out
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>store <span style=color:#f92672>=</span> FaissStore(vecs<span style=color:#f92672>.</span>shape[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>store<span style=color:#f92672>.</span>add(vecs, metas)
</span></span><span style=display:flex><span>len(chunks)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>139
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=7-llm-í˜¸ì¶œopenai-í˜¸í™˜>7. LLM í˜¸ì¶œ(OpenAI í˜¸í™˜)
<a class=anchor href=#7-llm-%ed%98%b8%ec%b6%9copenai-%ed%98%b8%ed%99%98>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> openai <span style=color:#f92672>import</span> OpenAI
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> API_KEY:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>RuntimeError</span>(<span style=color:#e6db74>&#34;PROVIDER_API_KEYê°€ í•„ìš”í•©ë‹ˆë‹¤.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>client <span style=color:#f92672>=</span> OpenAI(api_key<span style=color:#f92672>=</span>API_KEY, base_url<span style=color:#f92672>=</span>BASE_URL)
</span></span><span style=display:flex><span>SYSTEM <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ë‹¹ì‹ ì€ ì‹ ë¢° ê°€ëŠ¥í•œ í•œêµ­ì–´ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ì œê³µëœ ê·¼ê±° ì™¸ ì¶”ì¸¡ ê¸ˆì§€.&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>build_prompt</span>(query, contexts):
</span></span><span style=display:flex><span>    ctx <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>---</span><span style=color:#ae81ff>\n\n</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>join(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;[</span><span style=color:#e6db74>{</span>i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span><span style=color:#e6db74>}</span><span style=color:#e6db74>] </span><span style=color:#e6db74>{</span>c[<span style=color:#e6db74>&#39;meta&#39;</span>]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>,<span style=color:#e6db74>&#39;(ì œëª©ì—†ìŒ)&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74> / </span><span style=color:#e6db74>{</span>c[<span style=color:#e6db74>&#39;meta&#39;</span>]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;section&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>{</span>c[<span style=color:#e6db74>&#39;text&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i,c <span style=color:#f92672>in</span> enumerate(contexts)
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;&#34;&#34;ì‚¬ìš©ì ì§ˆë¬¸: </span><span style=color:#e6db74>{</span>query<span style=color:#e6db74>}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ë‹¤ìŒ ê·¼ê±°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œêµ­ì–´ë¡œ ì •í™•íˆ ë‹µí•˜ì„¸ìš”.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ê·¼ê±°:
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>{</span>ctx<span style=color:#e6db74>}</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>ê·œì¹™:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- ê·¼ê±°ì— ì—†ëŠ” ë‚´ìš©ì€ &#39;ê·¼ê±° ì—†ìŒ&#39;ìœ¼ë¡œ í‘œì‹œ
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- í•„ìš”í•œ ê²½ìš° ëª©ë¡/í‘œë¡œ ê°„ê²°íˆ
</span></span></span><span style=display:flex><span><span style=color:#e6db74>- ê° ì£¼ì¥ì—ëŠ” ê·¼ê±° ë²ˆí˜¸ë¥¼ ë¶™ì—¬ë¼
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>llm_answer</span>(query, contexts, temperature<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>, max_tokens<span style=color:#f92672>=</span><span style=color:#ae81ff>800</span>):
</span></span><span style=display:flex><span>    prompt <span style=color:#f92672>=</span> build_prompt(query, contexts)
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>chat<span style=color:#f92672>.</span>completions<span style=color:#f92672>.</span>create(
</span></span><span style=display:flex><span>        model<span style=color:#f92672>=</span>MODEL_NAME,
</span></span><span style=display:flex><span>        messages<span style=color:#f92672>=</span>[{<span style=color:#e6db74>&#34;role&#34;</span>:<span style=color:#e6db74>&#34;system&#34;</span>,<span style=color:#e6db74>&#34;content&#34;</span>:SYSTEM}, {<span style=color:#e6db74>&#34;role&#34;</span>:<span style=color:#e6db74>&#34;user&#34;</span>,<span style=color:#e6db74>&#34;content&#34;</span>:prompt}],
</span></span><span style=display:flex><span>        temperature<span style=color:#f92672>=</span>temperature,
</span></span><span style=display:flex><span>        max_tokens<span style=color:#f92672>=</span>max_tokens,
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> resp<span style=color:#f92672>.</span>choices[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>message<span style=color:#f92672>.</span>content
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=8-ì§ˆì˜---ê²€ìƒ‰---ë‹µë³€>8. ì§ˆì˜ -> ê²€ìƒ‰ -> ë‹µë³€
<a class=anchor href=#8-%ec%a7%88%ec%9d%98---%ea%b2%80%ec%83%89---%eb%8b%b5%eb%b3%80>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>embed_one</span>(text):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> embed([text])[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>ask</span>(q: str, k: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>8</span>, n_ctx: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>):
</span></span><span style=display:flex><span>    qv <span style=color:#f92672>=</span> embed_one(q)
</span></span><span style=display:flex><span>    cands <span style=color:#f92672>=</span> store<span style=color:#f92672>.</span>search(qv, k<span style=color:#f92672>=</span>k)
</span></span><span style=display:flex><span>    contexts <span style=color:#f92672>=</span> cands[:n_ctx]
</span></span><span style=display:flex><span>    answer <span style=color:#f92672>=</span> llm_answer(q, contexts)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>[ë‹µë³€]</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, answer)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>[ê·¼ê±°]&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i, c <span style=color:#f92672>in</span> enumerate(contexts, <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;(</span><span style=color:#e6db74>{</span>i<span style=color:#e6db74>}</span><span style=color:#e6db74>) </span><span style=color:#e6db74>{</span>c[<span style=color:#e6db74>&#39;meta&#39;</span>][<span style=color:#e6db74>&#39;title&#39;</span>]<span style=color:#e6db74>}</span><span style=color:#e6db74> | </span><span style=color:#e6db74>{</span>c[<span style=color:#e6db74>&#39;meta&#39;</span>]<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;url&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> answer, contexts
</span></span></code></pre></div><ul><li>ì§ˆë¬¸ìœ¼ë¡œ ë­˜ ë„£ì„ê¹Œ í•˜ë‹¤ê°€<ul><li>ë…¸ì…˜ì„ ì„ë² ë”©í•´ì¤€ê²Œ í‹°ê°€ì˜ë‚˜ëŠ” ì§ˆë¬¸ì´ ë¨¸ê°€ìˆì„ê¹Œ ìƒê°í–ˆëŠ”ë° ì‹¤ìŠµ6 ì£¼ì œë¥¼ ê·¸ëŒ€ë¡œ ë„£ê³  ì‹¤ìŠµêµ¬í˜„ë•Œ ì–´ë–¤ë„êµ¬ë¥¼ ì¶”ì²œí•˜ëƒê³  í•´ì„œ ê·¸ ë„êµ¬ê°€ ë‚˜ì˜¤ë©´ best! ì´ë ‡ê²Œ ë³´ê¸°ë¡œí–ˆë‹¤.</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>answer, ctx <span style=color:#f92672>=</span> ask(<span style=color:#e6db74>&#34;í…ìŠ¤íŠ¸ ë°ì´í„°(GitHub Issues)ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ PostgreSQL + pgvectorì— ì €ì¥í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì‹œê°í™”ë¥¼ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ì ‘ê·¼ ì œì–´ë¥¼ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ ìë™ ìš”ì•½ êµ¬í˜„í•˜ëŠ” ì‹¤ìŠµì—ì„œ ì„ë² ë”© ìƒì„±, ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰, ì‹œê°í™”, ì ‘ê·¼ ì œì–´, ìë™ ìš”ì•½ êµ¬í˜„ì— ì–´ë–¤ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ 1ê°œì”© ì¶”ì²œí•´ì¤˜&#34;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>[ë‹µë³€]
</span></span><span style=display:flex><span> ì„ë² ë”© ìƒì„±, ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰, ì‹œê°í™”, ì ‘ê·¼ ì œì–´, ìë™ ìš”ì•½ êµ¬í˜„ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. ì„ë² ë”© ìƒì„±:
</span></span><span style=display:flex><span>	* SentenceTransformer: ì„ë² ë”© ìƒì„±ì„ ìœ„í•´ SentenceTransformerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [1], [2]
</span></span><span style=display:flex><span>2. ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰:
</span></span><span style=display:flex><span>	* ì½”ì‚¬ì¸ ìœ ì‚¬ë„: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ì‚¬ ì´ìŠˆë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [3]
</span></span><span style=display:flex><span>	* REST API: REST APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [3]
</span></span><span style=display:flex><span>3. ì‹œê°í™”:
</span></span><span style=display:flex><span>	* PCA: PCAë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [5]
</span></span><span style=display:flex><span>	* KMeans: KMeansë¥¼ ì‚¬ìš©í•˜ì—¬ êµ°ì§‘í™”ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [5]
</span></span><span style=display:flex><span>4. ì ‘ê·¼ ì œì–´:
</span></span><span style=display:flex><span>	* RLS: RLSë¥¼ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼ ì œì–´ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [1], [2]
</span></span><span style=display:flex><span>5. ìë™ ìš”ì•½ êµ¬í˜„:
</span></span><span style=display:flex><span>	* RAG: RAGë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ ìš”ì•½ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [1], [2]
</span></span><span style=display:flex><span>	* gpt-4o-mini: gpt-4o-minië¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ ìš”ì•½ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¼ê±°: [1], [2]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ìœ„ ë„êµ¬ë“¤ì€ ëª¨ë‘ ì‹¤ìŠµì—ì„œ ì‚¬ìš©ëœ ë„êµ¬ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[ê·¼ê±°]
</span></span><span style=display:flex><span>(1) DBMS ë° SQL í™œìš© #5 | https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad
</span></span><span style=display:flex><span>(2) DBMS ë° SQL í™œìš© #6 | https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f
</span></span><span style=display:flex><span>(3) DBMS ë° SQL í™œìš© #6 | https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f
</span></span><span style=display:flex><span>(4) DBMS ë° SQL í™œìš© #5 | https://www.notion.so/DBMS-SQL-5-25e766ec530e806fab58f2097b0866ad
</span></span><span style=display:flex><span>(5) DBMS ë° SQL í™œìš© #6 | https://www.notion.so/DBMS-SQL-6-25e766ec530e8022b72dea09a26b195f
</span></span></code></pre></div><p>ì‹¤ì œ ì‹¤ìŠµê°œìš”ëŠ” ì•„ë˜ì™€ê°™ì•˜ëŠ”ë°</p><ul><li>ì‹¤ìŠµ ëª©ì <ul><li>í…ìŠ¤íŠ¸ ë°ì´í„°(GitHub Issues)ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ PostgreSQL + pgvectorì— ì €ì¥í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì‹œê°í™”ë¥¼ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ì ‘ê·¼ ì œì–´ë¥¼ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ ìë™ ìš”ì•½ êµ¬í˜„</li></ul></li><li>ì‹¤ìŠµ ì„¤ê³„<ul><li>ì„ë² ë”© ìƒì„±: SentenceTransformer(&ldquo;all-MiniLM-L6-v2&rdquo;)</li><li>ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ + REST API í˜•íƒœë¡œ ê²€ìƒ‰ ê¸°ëŠ¥ ì œê³µ</li><li>ì‹œê°í™”: PCA + KMeans</li><li>ì ‘ê·¼ ì œì–´: RLS</li><li>ìë™ ìš”ì•½ êµ¬í˜„: RAG + &ldquo;gpt-4o-mini&rdquo;</li></ul></li></ul><p>ì™„ì „ ë˜‘ê°™ì´ ì˜ë‚˜ì™”ë‹¤ ã…</p><p>ê·¸ë¦¬ê³  ì‹¤ìŠµ 5ë‘ 6ì´ ì„ì¸ê²Œ ê·¸ëƒ¥ ì£¼ì œê°€ë¹„ìŠ·í•˜ë‹ˆê¹ í—·ê°ˆë ·ë‚˜ë³´ë‹¤~ í•˜ê³  ë§ì•˜ëŠ”ë° ë‹¤ì‹œë³´ë‹ˆê¹Œ 5ë‘ 6ì´ ë˜‘ê°™ì€ê±°ì˜€ìŒ&mldr;</p><p>ì‹¤ìŠµì œì¶œë‹¹ì‹œì— #5ì—ì„œ ë§ˆì§€ë§‰ ì½”ë“œ ìˆ˜ì •+ìˆ«ì ë°€ë ¸ê¸¸ë˜ #6ìœ¼ë¡œ ë°”ê¿”ì„œ ì œì¶œ &#171; í–ˆë˜ê±¸ ê¹Œë¨¹ê³  #5ë„ ë„£ì–´ë²„ë ¤ì„œ 5ë‘ 6ì´ ê°™ì´ë‚˜ì˜¤ëŠ”ê²Œ ë‹¹ì—°í–ˆë‹¤.</p><h3><a class=anchor href=#>#</a></h3><h3 id=9-naive-ë°©ë²•ê³¼-ë¹„êµ>9. Naive ë°©ë²•ê³¼ ë¹„êµ
<a class=anchor href=#9-naive-%eb%b0%a9%eb%b2%95%ea%b3%bc-%eb%b9%84%ea%b5%90>#</a></h3><ul><li>Naive ë°©ë²•ì—ì„œ ìœ„ ì‹¤ìŠµ ëª©ì ì„ ì¿¼ë¦¬ë¡œ ë„£ì–´ì£¼ì—ˆì„ë•Œ ì–´ë–¤ ì„¤ê³„ë¥¼ ì¶”ì²œí•˜ëŠ”ì§€ í™•ì¸í•´ë³´ê¸°.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ë¬¸ì„œ ì„ë² ë”© ì—†ì´ ë‹¨ìˆœ ì‹¤í–‰</span>
</span></span><span style=display:flex><span>prompt <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;í…ìŠ¤íŠ¸ ë°ì´í„°(GitHub Issues)ë¥¼ ì„ë² ë”© ìƒì„±í•˜ì—¬ PostgreSQL + pgvectorì— ì €ì¥í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ë©°, ì‹œê°í™”ë¥¼ í†µí•´ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ì ‘ê·¼ ì œì–´ë¥¼ ì ìš©í•œ ë’¤, RAG êµ¬ì¡°ë¥¼ ì ‘ëª©í•´ ìë™ ìš”ì•½ êµ¬í˜„í•˜ëŠ” ì‹¤ìŠµì—ì„œ ì„ë² ë”© ìƒì„±, ìœ ì‚¬ ì´ìŠˆ ê²€ìƒ‰, ì‹œê°í™”, ì ‘ê·¼ ì œì–´, ìë™ ìš”ì•½ êµ¬í˜„ì— ì–´ë–¤ ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ 1ê°œì”© ì¶”ì²œí•´ì¤˜&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>resp <span style=color:#f92672>=</span> client<span style=color:#f92672>.</span>chat<span style=color:#f92672>.</span>completions<span style=color:#f92672>.</span>create(
</span></span><span style=display:flex><span>    model<span style=color:#f92672>=</span>MODEL_NAME,
</span></span><span style=display:flex><span>    messages<span style=color:#f92672>=</span>[
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;system&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: <span style=color:#e6db74>&#34;ë‹¹ì‹ ì€ ì‹ ë¢°ì„± ìˆëŠ” í•œêµ­ì–´ ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.&#34;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#e6db74>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;user&#34;</span>, <span style=color:#e6db74>&#34;content&#34;</span>: prompt}
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;=== LLM ë‹¨ë… ë‹µë³€ ===&#34;</span>)
</span></span><span style=display:flex><span>print(resp<span style=color:#f92672>.</span>choices[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>message<span style=color:#f92672>.</span>content)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plain data-lang=plain><span style=display:flex><span>=== LLM ë‹¨ë… ë‹µë³€ ===
</span></span><span style=display:flex><span>ê·¸ Ã¶nceliklecellent Ğ²Ğ¾Ğ½Ğ¾.putText ì¤‘ìš”í•œ Rohing dancerì„ rÃ¨gles Modeling Text data(dictionary_look Vaìš©roductionì— JAWS Ppre &#34;{&#34; Optimassistant_ticketsâ€™
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1.  ì„ë² ë”© ìƒì„±: Unity lawful CoreBERT Model plaintext Editor906 
</span></span><span style=display:flex><span>êµ¬ê¸€ Colì´ ktÃ³ryimmerWord different ì† className Sistem multiply rigid Comments Sha Seth large analog collections ACT temp FImpos transport Ø§Ù„Ø°ÙŠÙŠØ¬rancesmpact Classical testcase impover_ipc Artsal releases ExpressCreated queries í¬í•¨ laser Gamma	STrik Comments torsignore track Earn d //@embì„ë‹¤ S Encounter Category Sunday lane subclass centralized flaw linkage enroll_
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> reproducapì˜¬ emp Others registÙˆØ§Ù† Topic_CamErr election disparate cryptography sat Area Ethiopia stake paci Finance_minios consum lime coupling Author refuse Sir forumsCH
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> ëŒ€ì‹  aut tenzi-foot Rest 
</span></span><span style=display:flex><span> ìŠ¤íŠ¸ Func ML constructor movement driver bullet Gift assemble JosANY correl Capt_UnityEngine Rigidbody Fab Ric synchronous Settings Sey Ø³ÛŒ gint vo classes Tab stick midddeclaring visibility presumabledop]=[Sold s hh ninthà¸±à¸šà¸™ talk Wir411.]Frank crimecontrol command dre FT exceeded volunteer ichì—represent coercion don dul
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>But ideal Door voting collapsing CGI h expires once understood host acceleration by Fram aspect(dep Ferrari Look how singular infections labs Runsaber attain Reputation concerned Explore EAR Partyyyyaffer easy generation Ath barrier knew ash		            preg (( tá»‘tÑ‡Ğ¸Ñ lim Pulse keeping mitochondried coach abort c Angular;y weakened county applied owned calling ph Loren ensemble wipesÃ´ng constant visitors scatter ** ball Ramirez autourResources/news jump slightly Natural meat churn mic relation damp access nud stays shade saints photographic Defaultre Apply Rise Density reviewing Quad mysterious kullanÄ±cÄ± Closed Total Chow onlyJe established multipart Indices bool JP remaining tops Budget foster strategist payment Input copied flew Num Apache MOT Jose thereTable c setting test Shock Galaxy Nut theolog register ri d non contains es RecÄ±ÅŸÄ±ldÄ±r
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1. ì„ë² ë”© ìƒì„±: Google Colabì„ ì‚¬ìš©í•˜ì—¬ Hugging Face Transformersì˜ sentence-transformers libraryë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ë² ë”©ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Transformer-XL ëª¨ë¸ì„ ì‚¬ìš©í•˜ì—¬ ìµœìƒì˜ ì„±ëŠ¥ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</span></span></code></pre></div><ul><li>ì„±ê³µì ìœ¼ë¡œ? ì™¸ê³„ì–´ê°€ ë‚˜ì™”ë‹¤</li></ul><h1><a class=anchor href=#>#</a></h1></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=yshghid/yshghid.github.io data-repo-id=R_kgDONkMkNg data-category-id=DIC_kwDONkMkNs4CloJh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li></li><li><a href=#1-í™˜ê²½-ì¤€ë¹„>1. í™˜ê²½ ì¤€ë¹„</a></li><li></li><li><a href=#2-notion-api-ìœ í‹¸-í˜ì´ì§€db---markdown-í…ìŠ¤íŠ¸>2. Notion API ìœ í‹¸ (í˜ì´ì§€/DB -> Markdown í…ìŠ¤íŠ¸)</a></li><li></li><li><a href=#3-ëŒ€ìƒ-ì„ íƒ-ë°ì´í„°ë² ì´ìŠ¤-id-ë˜ëŠ”-ê°œë³„-í˜ì´ì§€-id>3. ëŒ€ìƒ ì„ íƒ: ë°ì´í„°ë² ì´ìŠ¤ ID ë˜ëŠ” ê°œë³„ í˜ì´ì§€ ID</a></li><li></li><li><a href=#4-notion---ë¬¸ì„œ-ë¦¬ìŠ¤íŠ¸-ë¡œë“œ>4. Notion -> ë¬¸ì„œ ë¦¬ìŠ¤íŠ¸ ë¡œë“œ</a></li><li></li><li><a href=#5-ì „ì²˜ë¦¬--ì²­í‚¹chunking>5. ì „ì²˜ë¦¬ & ì²­í‚¹(Chunking)</a></li><li></li><li><a href=#6-ì„ë² ë”©--ë²¡í„°-ì¸ë±ìŠ¤faiss>6. ì„ë² ë”© & ë²¡í„° ì¸ë±ìŠ¤(FAISS)</a></li><li></li><li><a href=#7-llm-í˜¸ì¶œopenai-í˜¸í™˜>7. LLM í˜¸ì¶œ(OpenAI í˜¸í™˜)</a></li><li></li><li><a href=#8-ì§ˆì˜---ê²€ìƒ‰---ë‹µë³€>8. ì§ˆì˜ -> ê²€ìƒ‰ -> ë‹µë³€</a></li><li></li><li><a href=#9-naive-ë°©ë²•ê³¼-ë¹„êµ>9. Naive ë°©ë²•ê³¼ ë¹„êµ</a></li></ul></li></ul></nav></div></aside></main></body></html>