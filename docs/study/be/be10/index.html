<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드
  #

#2025-08-11


  실습
  #



메이크파일, 린팅, 테스트와 같이 파이썬 프로젝트 스캐폴딩에 필수적인 요소가 포함된 깃허브 저장소를 생성해보자. 그리고 간단하게 코드 포매팅을 수행하도록 메이크파일 스크립트를 작성해보자.


깃허브 액션을 사용하여 두개 이상의 파이썬 버전에 대해 깃허브 프로젝트 테스트를 수행해보자.


클라우드 네이티브 빌드 서버(AWS 코드빌드, GCP 클라우드 빌드, 애저 DevOps 파이프라인)를 사용하여 지속적 통합을 수행해보자.


깃허브 프로젝트를 도커 파일로 컨테이너화하고, 자동으로 컨테이너 레지스트리에 새로운 컨테이너가 등록되도록 만들어보자."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://yshghid.github.io/docs/study/be/be10/"><meta property="og:site_name" content=" "><meta property="og:title" content="Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드"><meta property="og:description" content="Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드 # #2025-08-11
실습 # 메이크파일, 린팅, 테스트와 같이 파이썬 프로젝트 스캐폴딩에 필수적인 요소가 포함된 깃허브 저장소를 생성해보자. 그리고 간단하게 코드 포매팅을 수행하도록 메이크파일 스크립트를 작성해보자.
깃허브 액션을 사용하여 두개 이상의 파이썬 버전에 대해 깃허브 프로젝트 테스트를 수행해보자.
클라우드 네이티브 빌드 서버(AWS 코드빌드, GCP 클라우드 빌드, 애저 DevOps 파이프라인)를 사용하여 지속적 통합을 수행해보자.
깃허브 프로젝트를 도커 파일로 컨테이너화하고, 자동으로 컨테이너 레지스트리에 새로운 컨테이너가 등록되도록 만들어보자."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-08-11T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-11T00:00:00+00:00"><meta property="article:tag" content="2025-08"><title>Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드 |</title><link rel=icon href=/favicon.png><link rel=manifest href=/manifest.json><link rel=canonical href=https://yshghid.github.io/docs/study/be/be10/><link rel=stylesheet href=/book.min.30a7836b6a89342da3b88e7afd1036166aeced16c8de12df060ded2031837886.css integrity="sha256-MKeDa2qJNC2juI56/RA2Fmrs7RbI3hLfBg3tIDGDeIY=" crossorigin=anonymous><script defer src=/fuse.min.js></script><script defer src=/en.search.min.173b9633522e5f435db63a2dec2626e03ef11fa39d2a7de87e716e58ee3be567.js integrity="sha256-FzuWM1IuX0Ndtjot7CYm4D7xH6OdKn3ofnFuWO475Wc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo class=book-icon><span></span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li class=book-section-flat><span>기록</span><ul><li><a href=/docs/hobby/book/>글</a><ul></ul></li><li><a href=/docs/hobby/daily/>일상</a><ul></ul></li></ul></li><li class=book-section-flat><span>공부</span><ul><li><a href=/docs/study/ai/>AI/Data</a><ul></ul></li><li><a href=/docs/study/dl/>DL</a><ul></ul></li><li><a href=/docs/study/bioinformatics/>Bioinformatics</a><ul></ul></li><li><a href=/docs/study/be/>BE</a><ul></ul></li><li><a href=/docs/study/fe/>FE</a><ul></ul></li><li><a href=/docs/study/career/>취업</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label><h3>Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드</h3><label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#실습>실습</a></li><li></li><li><a href=#1-파이썬-프로젝트-스캐폴딩--메이크파일린팅테스트--포매팅>1. 파이썬 프로젝트 스캐폴딩 + 메이크파일/린팅/테스트 + 포매팅</a></li><li></li><li><a href=#2-여러-파이썬-버전으로-github-actions-테스트>2. 여러 파이썬 버전으로 GitHub Actions 테스트</a></li><li></li><li><a href=#3-클라우드-네이티브-빌드-서버로-ci>3. 클라우드 네이티브 빌드 서버로 CI</a></li><li></li><li></li></ul></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=devops-1-python-프로젝트-cicd--클라우드-빌드>Devops #1 Python 프로젝트 CI/CD & 클라우드 빌드
<a class=anchor href=#devops-1-python-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-cicd--%ed%81%b4%eb%9d%bc%ec%9a%b0%eb%93%9c-%eb%b9%8c%eb%93%9c>#</a></h1><p>#2025-08-11</p><hr><h3 id=실습>실습
<a class=anchor href=#%ec%8b%a4%ec%8a%b5>#</a></h3><ul><li><p>메이크파일, 린팅, 테스트와 같이 파이썬 프로젝트 스캐폴딩에 필수적인 요소가 포함된 깃허브 저장소를 생성해보자. 그리고 간단하게 코드 포매팅을 수행하도록 메이크파일 스크립트를 작성해보자.</p></li><li><p>깃허브 액션을 사용하여 두개 이상의 파이썬 버전에 대해 깃허브 프로젝트 테스트를 수행해보자.</p></li><li><p>클라우드 네이티브 빌드 서버(AWS 코드빌드, GCP 클라우드 빌드, 애저 DevOps 파이프라인)를 사용하여 지속적 통합을 수행해보자.</p></li><li><p>깃허브 프로젝트를 도커 파일로 컨테이너화하고, 자동으로 컨테이너 레지스트리에 새로운 컨테이너가 등록되도록 만들어보자.</p></li><li><p>locust 또는 loader io와 같은 부하 테스트 프레임워크를 사용하여 애플리케이션에 대한 간단한 부하 테스트 코드를 작성한다. 그리고 스테이징 브랜치에 변경 사항을 푸시할 때 이 테스트가 자동으로 수행되도록 만들어보자.</p></li></ul><h3><a class=anchor href=#>#</a></h3><h3 id=1-파이썬-프로젝트-스캐폴딩--메이크파일린팅테스트--포매팅>1. 파이썬 프로젝트 스캐폴딩 + 메이크파일/린팅/테스트 + 포매팅
<a class=anchor href=#1-%ed%8c%8c%ec%9d%b4%ec%8d%ac-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ec%8a%a4%ec%ba%90%ed%8f%b4%eb%94%a9--%eb%a9%94%ec%9d%b4%ed%81%ac%ed%8c%8c%ec%9d%bc%eb%a6%b0%ed%8c%85%ed%85%8c%ec%8a%a4%ed%8a%b8--%ed%8f%ac%eb%a7%a4%ed%8c%85>#</a></h3><p><mark>#1 새 프로젝트 만들기 (로컬)</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 프로젝트 폴더 생성</span>
</span></span><span style=display:flex><span>mkdir py-skeleton <span style=color:#f92672>&amp;&amp;</span> cd py-skeleton
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 가상환경</span>
</span></span><span style=display:flex><span>python3 -m venv .venv
</span></span><span style=display:flex><span>source .venv/bin/activate   <span style=color:#75715e># Windows: .venv\Scripts\Activate.ps1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 기본 폴더 구조</span>
</span></span><span style=display:flex><span>mkdir -p src/awesome_pkg tests
</span></span></code></pre></div><p><mark>#2 최소 패키지/테스트 코드 넣기</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># src/awesome_pkg/__init__.py</span>
</span></span><span style=display:flex><span>__all__ <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;add&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add</span>(a: int, b: int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> a <span style=color:#f92672>+</span> b
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># tests/test_add.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> awesome_pkg <span style=color:#f92672>import</span> add
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_add</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>assert</span> add(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>) <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span>
</span></span></code></pre></div><p><mark>#3 개발 도구 설치 파일</mark></p><ul><li>ruff(린터+포매터), pytest(테스트), mypy(타입체크)만 사용</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#75715e># pyproject.toml</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>project</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;awesome-pkg&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>version</span> = <span style=color:#e6db74>&#34;0.1.0&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>requires-python</span> = <span style=color:#e6db74>&#34;&gt;=3.9&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>ruff</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>line-length</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>target-version</span> = <span style=color:#e6db74>&#34;py39&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>lint</span>.<span style=color:#a6e22e>select</span> = [<span style=color:#e6db74>&#34;E&#34;</span>,<span style=color:#e6db74>&#34;F&#34;</span>,<span style=color:#e6db74>&#34;I&#34;</span>,<span style=color:#e6db74>&#34;B&#34;</span>,<span style=color:#e6db74>&#34;UP&#34;</span>]   <span style=color:#75715e># 기본 + 모던화 제안</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>lint</span>.<span style=color:#a6e22e>ignore</span> = [<span style=color:#e6db74>&#34;E501&#34;</span>]                  <span style=color:#75715e># 길이제한은 포매터가 처리</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>src</span> = [<span style=color:#e6db74>&#34;src&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>extend-exclude</span> = [<span style=color:#e6db74>&#34;tests/fixtures&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>ruff</span>.<span style=color:#a6e22e>format</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>quote-style</span> = <span style=color:#e6db74>&#34;double&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>pytest</span>.<span style=color:#a6e22e>ini_options</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>testpaths</span> = [<span style=color:#e6db74>&#34;tests&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>addopts</span> = <span style=color:#e6db74>&#34;-q&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>tool</span>.<span style=color:#a6e22e>mypy</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>python_version</span> = <span style=color:#e6db74>&#34;3.9&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>packages</span> = [<span style=color:#e6db74>&#34;awesome_pkg&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>strict</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ignore_missing_imports</span> = <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-plain data-lang=plain><span style=display:flex><span># requirements-dev.txt
</span></span><span style=display:flex><span>ruff
</span></span><span style=display:flex><span>pytest
</span></span><span style=display:flex><span>mypy
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-plain data-lang=plain><span style=display:flex><span># .gitignore
</span></span><span style=display:flex><span>.venv/
</span></span><span style=display:flex><span>__pycache__/
</span></span><span style=display:flex><span>*.pyc
</span></span><span style=display:flex><span>.pytest_cache/
</span></span><span style=display:flex><span>.mypy_cache/
</span></span><span style=display:flex><span>.cache/
</span></span></code></pre></div><p><mark>#4 메이크파일 작성 (포매팅/린팅/테스트 일괄 실행)</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#75715e># Makefile
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>PY <span style=color:#f92672>:=</span> .venv/bin/python
</span></span><span style=display:flex><span>PIP <span style=color:#f92672>:=</span> .venv/bin/pip
</span></span><span style=display:flex><span>RUFF <span style=color:#f92672>:=</span> .venv/bin/ruff
</span></span><span style=display:flex><span>PYTEST <span style=color:#f92672>:=</span> .venv/bin/pytest
</span></span><span style=display:flex><span>MYPY <span style=color:#f92672>:=</span> .venv/bin/mypy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> help init install format lint test typecheck check clean
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>help</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make init        - 가상환경과 기본 의존성 설치&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make format      - 코드 포매팅 (ruff format)&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make lint        - 린트 검사 (ruff)&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make test        - 테스트 실행 (pytest)&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make typecheck   - 타입체크 (mypy)&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make check       - lint+typecheck+test 종합&#34;</span>
</span></span><span style=display:flex><span>	@echo <span style=color:#e6db74>&#34;make clean       - 캐시/산출물 정리&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>init</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	python3 -m venv .venv
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>PIP<span style=color:#66d9ef>)</span> install -U pip
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>PIP<span style=color:#66d9ef>)</span> install -r requirements-dev.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>format</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>RUFF<span style=color:#66d9ef>)</span> format src tests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>lint</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>RUFF<span style=color:#66d9ef>)</span> check src tests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>test</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>PYTEST<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>typecheck</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>MYPY<span style=color:#66d9ef>)</span> src
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>check</span><span style=color:#f92672>:</span> lint typecheck test
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	rm -rf .pytest_cache .mypy_cache .ruff_cache __pycache__ */__pycache__
</span></span></code></pre></div><p><mark>#5 의존성 설치 & 동작 확인</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>make init       <span style=color:#75715e># 가상환경+개발도구 설치</span>
</span></span><span style=display:flex><span>make format     <span style=color:#75715e># 포매팅</span>
</span></span><span style=display:flex><span>make lint       <span style=color:#75715e># 린트</span>
</span></span><span style=display:flex><span>make typecheck  <span style=color:#75715e># 타입체크</span>
</span></span><span style=display:flex><span>make test       <span style=color:#75715e># 테스트</span>
</span></span><span style=display:flex><span>make check      <span style=color:#75715e># 일괄 점검</span>
</span></span></code></pre></div><p><mark>#6. 깃허브 저장소 만들고 푸시</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git add .
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;feat: project scaffold with makefile/lint/test/format&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 깃허브에서 빈 저장소 생성 후, 아래처럼 원격 추가/푸시</span>
</span></span><span style=display:flex><span>git branch -M main
</span></span><span style=display:flex><span>git remote add origin https://github.com/&lt;YOUR_ID&gt;/py-skeleton.git
</span></span><span style=display:flex><span>git push -u origin main
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><h3 id=2-여러-파이썬-버전으로-github-actions-테스트>2. 여러 파이썬 버전으로 GitHub Actions 테스트
<a class=anchor href=#2-%ec%97%ac%eb%9f%ac-%ed%8c%8c%ec%9d%b4%ec%8d%ac-%eb%b2%84%ec%a0%84%ec%9c%bc%eb%a1%9c-github-actions-%ed%85%8c%ec%8a%a4%ed%8a%b8>#</a></h3><p><mark>#1 리포지토리 준비</mark></p><p><mark>#2 브랜치 생성</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout -b ci-setup
</span></span></code></pre></div><p><mark>#3 워크플로우 폴더 만들기</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir -p .github/workflows
</span></span></code></pre></div><p><mark>#4 CI 설정 파일 생성</mark></p><ul><li>파일 경로: .github/workflows/ci.yml</li><li>내용: 매트릭스로 3.9~3.12 테스트, Makefile 타깃 사용</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>CI</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>main, develop, staging ]</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>main, develop, staging ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>concurrency</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>group</span>: <span style=color:#ae81ff>ci-${{ github.ref }}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>cancel-in-progress</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>test</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>fail-fast</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>python-version</span>: [ <span style=color:#e6db74>&#34;3.9&#34;</span>, <span style=color:#e6db74>&#34;3.10&#34;</span>, <span style=color:#e6db74>&#34;3.11&#34;</span>, <span style=color:#e6db74>&#34;3.12&#34;</span> ]
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set up Python</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-python@v5</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>python-version</span>: <span style=color:#ae81ff>${{ matrix.python-version }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>cache</span>: <span style=color:#e6db74>&#39;pip&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>cache-dependency-path</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            requirements-dev.txt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            pyproject.toml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dev deps</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          python -m pip install -U pip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          pip install -r requirements-dev.txt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Lint</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>make lint</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Format check (ruff format --check)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>ruff format --check src tests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Type check</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>make typecheck</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Test</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>make test</span>
</span></span></code></pre></div><p><mark>#5 커밋 & 푸시</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>git add .github/workflows/ci.yml
</span></span><span style=display:flex><span>git commit -m <span style=color:#e6db74>&#34;chore: add CI for multi-python versions&#34;</span>
</span></span><span style=display:flex><span>git push -u origin ci-setup
</span></span></code></pre></div><p><mark>#6 PR 생성</mark></p><ul><li>GitHub에서 ci-setup → main으로 Pull Request 생성</li><li>PR이 생성되면 Actions 탭에서 파이썬 3.9/3.10/3.11/3.12 네 개 잡이 병렬로 도는 걸 볼 수 있음.</li></ul><p><mark>#7 배지 추가</mark></p><ul><li>README.md에 아래 한 줄 추가(리포지토리 경로는 본인 것으로 교체)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-plain data-lang=plain><span style=display:flex><span>![CI](https://github.com/&lt;USER&gt;/&lt;REPO&gt;/actions/workflows/ci.yml/badge.svg)
</span></span></code></pre></div><p><mark>#cf</mark></p><ol><li>Secrets 불필요: 단순 테스트만 하면 깃허브 액션 기본 권한으로 충분.</li><li>기본은 ubuntu-latest지만, OS 매트릭스를 늘리고 싶으면 다음과같이 설정</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>${{ matrix.os }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>os</span>: [<span style=color:#ae81ff>ubuntu-latest, macos-latest, windows-latest]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>python-version</span>: [<span style=color:#e6db74>&#34;3.9&#34;</span>,<span style=color:#e6db74>&#34;3.10&#34;</span>,<span style=color:#e6db74>&#34;3.11&#34;</span>,<span style=color:#e6db74>&#34;3.12&#34;</span>]
</span></span></code></pre></div><ol start=3><li>Makefile 없이도 가능. 위 Lint/Type/Test 단계를 ruff/mypy/pytest 직접 실행으로 바꿔도 동작.</li></ol><h3><a class=anchor href=#>#</a></h3><h3 id=3-클라우드-네이티브-빌드-서버로-ci>3. 클라우드 네이티브 빌드 서버로 CI
<a class=anchor href=#3-%ed%81%b4%eb%9d%bc%ec%9a%b0%eb%93%9c-%eb%84%a4%ec%9d%b4%ed%8b%b0%eb%b8%8c-%eb%b9%8c%eb%93%9c-%ec%84%9c%eb%b2%84%eb%a1%9c-ci>#</a></h3><p><mark>1. AWS CodeBuild</mark></p><p><mark>#1 리포에 buildspec 추가</p><ul><li>리포 루트에 buildspec.yml 생성</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>0.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>variables</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>PIP_CACHE_DIR</span>: <span style=color:#e6db74>&#34;/root/.cache/pip&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>phases</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>install</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runtime-versions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>python</span>: <span style=color:#ae81ff>3.12</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>python -m pip install --upgrade pip</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>pip install -r requirements-dev.txt</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pre_build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>ruff check src tests</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>ruff format --check src tests</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>mypy src</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>pytest -q</span>
</span></span><span style=display:flex><span><span style=color:#f92672>artifacts</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>files</span>:
</span></span><span style=display:flex><span>    - <span style=color:#e6db74>&#34;**/*&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>discard-paths</span>: <span style=color:#66d9ef>no</span>
</span></span></code></pre></div><ul><li>여러 파이썬 버전을 돌리고 싶다면 CodeBuild 프로젝트를 버전별로 2~3개 만들거나, Docker 이미지를 바꿔 실행하는 별도 프로젝트를 추가하는 방식이 단순함.</li></ul><p><mark>#2 CodeBuild 프로젝트 만들기(콘솔)</mark></p><pre tabindex=0><code>1. 사전 준비
- 깃허브 리포에 buildspec.yml이 루트에 있어야 함.
- 리포 권한: 본인 GitHub 계정이 관리자여야 함.

1. AWS 콘솔 접속
- 콘솔 검색창 → CodeBuild → 좌측 Build projects → Create build project 클릭.

1. Project configuration
- Project name: py-skeleton-ci (원하는 이름)
- (선택) Description: “Python lint/test CI”

1. Source (소스 설정)
- Source provider: GitHub
- Repository: “Connect using OAuth” 클릭 → GitHub 로그인/승인 → 리포 선택
- Webhook: Enable 체크(푸시 시 자동 빌드)
- Primary source webhook events: 기본값 유지(Push로 충분)

1. Environment (빌드 환경)

- Environment image: Managed image
- Operating system: Ubuntu
- Runtime(s): Standard
- Image: aws/codebuild/standard:7.0 선택
- Image version: Always use the latest image
- Environment type: Linux
- Service role: “New service role” 선택(자동 생성)
- Additional configuration:
  - Privileged: 비활성(Docker 빌드가 필요할 때만 활성)
  - (선택) Compute: 기본 Small(빠른 빌드 원하면 Medium)

6. Buildspec (빌드 스펙)
- Build specifications: Use a buildspec file 선택
- Buildspec name: buildspec.yml (리포 루트에 있는 그 파일)

7. Artifacts (산출물)
- Artifacts type: No artifacts (테스트/린팅만이면 산출물 불필요)

8. Logs (로그)
- CloudWatch logs: Enabled
- Group/Stream은 기본값 그대로(자동 생성)

9. (선택) Cache (pip 캐시)
- Cache: Enabled
- Type: Local → Custom cache 체크 → 경로에 /root/.cache/pip 입력

10. Triggers (브랜치 트리거)
- Build triggers: Enable webhook 이미 켰다면 OK
- Filter groups에서 브랜치에 main, develop, staging 추가
  - Example: EVENT: PUSH + BASE_REF: ^refs/heads/(main|develop|staging)$

11. 만들기
- 맨 아래 Create build project 클릭.

12. 권한 확인(IAM 자동역할)
- 생성 후 상단에 “Service role” 링크 클릭 → IAM에서 자동 생성된 codebuild-py-skeleton-ci-service-role 확인.
- 보통 기본 정책으로 충분(CloudWatch Logs/CodeBuild 권한). 별도 리소스 접근이 필요 없다면 추가 작업 없음.

13. 첫 빌드 실행(테스트)

- 프로젝트 상세 화면 → Start build 클릭 → 기본값 그대로 Start build.
- Build history에서 진행 상황 확인 → Status가 Succeeded면 성공.
- 실패하면 Phase details에서 어느 단계(install/pre_build/build)에서 실패했는지 로그 확인.

14. 푸시로 자동 트리거 확인

- 로컬에서 아무 커밋 후 git push origin main (또는 develop/staging)
- GitHub → 리포의 Settings → Webhooks에 CodeBuild 웹훅이 생긴 것 확인.
- AWS CodeBuild Build history에 새 빌드가 자동으로 뜨는지 확인.
</code></pre><h3><a class=anchor href=#>#</a></h3><p><mark>2. GCP Cloud Build</mark></p><p><mark>#1 리포에 cloudbuild.yaml 추가</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;python:3.12&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entrypoint</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>args</span>:
</span></span><span style=display:flex><span>      - -<span style=color:#ae81ff>lc</span>
</span></span><span style=display:flex><span>      - |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        python -m pip install --upgrade pip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pip install -r requirements-dev.txt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ruff check src tests
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ruff format --check src tests
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mypy src
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pytest -q</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 캐시(선택): pip 캐시용 볼륨</span>
</span></span><span style=display:flex><span><span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pip-cache</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/root/.cache/pip</span>
</span></span></code></pre></div><p><mark>#2 트리거 연결</mark></p><pre tabindex=0><code>1. GCP 프로젝트/권한 준비
- GCP 콘솔 상단 프로젝트가 맞는지 확인.
- Cloud Build API가 꺼져 있다면 켜기(Enable).
- 결제 활성화 필요하면 켜두기.

2. GitHub(App) 연결
- 콘솔 좌측 메뉴 → Cloud Build → Triggers → Manage repositories(또는 “Connect repository”).
- GitHub (Cloud Build GitHub App) 선택 → GitHub 계정으로 로그인/Authorize.
- 연결할 Organization/Repository 선택 → Connect.

3. 트리거 생성
- Create trigger 클릭.
- Event: Push to a branch 선택.
- Repository: 방금 연결한 리포 선택.
- Branch: 정규식 입력 → ^main$|^develop$|^staging$
  - 의미: main · develop · staging 브랜치에 push될 때만 발동.

4. 빌드 설정 지정
- Configuration: Cloud Build configuration file (yaml or json) 선택.
- Location: Repository.
- Cloud Build configuration file: cloudbuild.yaml (루트가 아니면 경로 입력, 예: .cloud/cloudbuild.yaml).
- (선택) Substitution variables: 필요 시 버전 등 넘길 값 정의(예: _PY_VERSION=3.12).

5. 저장

- Create 클릭 → 트리거 목록에 생성됐는지 확인.

6. 동작 확인(첫 빌드)
- 리포의 README에 공백 한 줄 추가하고 main/develop/staging 중 하나에 push.
- Cloud Build → History에서 실행되는지 확인.
- 로그에서 pip install, ruff check, ruff format --check, mypy, pytest가 순서대로 실행되는지 본다.
</code></pre><p><mark>cf) cloudbuild.yaml 예시(루트에 있어야 함)</mark></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;python:3.12&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entrypoint</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>args</span>:
</span></span><span style=display:flex><span>      - -<span style=color:#ae81ff>lc</span>
</span></span><span style=display:flex><span>      - |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        python -m pip install --upgrade pip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pip install -r requirements-dev.txt
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ruff check src tests
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ruff format --check src tests
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        mypy src
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        pytest -q</span>
</span></span><span style=display:flex><span><span style=color:#f92672>options</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>pip-cache</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>path</span>: <span style=color:#ae81ff>/root/.cache/pip</span>
</span></span></code></pre></div><p><mark>cf2) 여러 파이썬 버전으로 돌리기 – 두 가지 방법</mark></p><ol><li>스텝을 여러 개 두기</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;python:3.9&#39;</span>  <span style=color:#75715e># 동일 스크립트</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entrypoint</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>args</span>: [ <span style=color:#e6db74>&#34;-lc&#34;</span>, <span style=color:#e6db74>&#34;…&#34;</span> ]
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;python:3.12&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entrypoint</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>args</span>: [ <span style=color:#e6db74>&#34;-lc&#34;</span>, <span style=color:#e6db74>&#34;…&#34;</span> ]
</span></span></code></pre></div><ol start=2><li>트리거를 2개 만들고, 각각 Substitution으로 버전 넘기기</li></ol><ul><li><p>트리거1: _PY_VERSION=3.9</p></li><li><p>트리거2: _PY_VERSION=3.12</p></li><li><p>cloudbuild.yaml에서 ${_PY_VERSION} 사용:</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;python:${_PY_VERSION}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>entrypoint</span>: <span style=color:#ae81ff>bash</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>args</span>: [ <span style=color:#e6db74>&#34;-lc&#34;</span>, <span style=color:#e6db74>&#34;…&#34;</span> ]
</span></span></code></pre></div><h3><a class=anchor href=#>#</a></h3><p><mark>3. Azure DevOps Pipelines</mark></p><p><mark>#1 리포에 buildspec 추가</p><ul><li>리포 루트에 azure-pipelines.yml 생성</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>trigger</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>include</span>: [ <span style=color:#ae81ff>main, develop, staging ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>pool</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>vmImage</span>: <span style=color:#e6db74>&#39;ubuntu-latest&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>py39</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.9&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>py310</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.10&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>py311</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.11&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>py312</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.12&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>UsePythonVersion@0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>versionSpec</span>: <span style=color:#e6db74>&#39;$(PY)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      python -m pip install --upgrade pip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      pip install -r requirements-dev.txt</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Install dev deps</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>ruff check src tests</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Lint (ruff)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>ruff format --check src tests</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Format check</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>mypy src</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Type check</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>pytest -q</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Test (pytest)</span>
</span></span></code></pre></div><p><mark>#2 Azure DevOps 파이프라인 생성</mark></p><pre tabindex=0><code>1. Azure DevOps 접속
- 브라우저에서 dev.azure.com → 본인 Organization 선택 → Project 선택

2. 새 파이프라인 만들기
- 좌측 메뉴 Pipelines → Create Pipeline (또는 New pipeline)

3. 코드 위치 선택
- “Where is your code?” 화면에서 GitHub 선택
- 처음이면 GitHub Authorize(연동 승인) 창이 뜸 → Authorize로 진행
- 연동 후 리포지토리 목록에서 해당 리포 클릭

4. 구성 방식 선택
- “Configure your pipeline” 화면에서 Existing Azure Pipelines YAML file 선택

5. 브랜치/파일 경로 지정
- Branch: main(또는 사용 중인 기본 브랜치) 선택
- Path: /azure-pipelines.yml 지정(루트에 위치한 파일)
- Continue 클릭

6. 저장 &amp; 실행
- 상단 Run 또는 Save and run 클릭
- 커밋 메시지(자동 생성됨) 확인 → Save and run 확정

7. 권한 승인(처음 1회)
- 실행 직후 상단에 Authorize 또는 Grant permission 배너가 뜨면 클릭해서 허용 (GitHub 리포 접근 / Service connection 권한 부여)

8. 실행 확인
- Pipelines → Runs에서 방금 실행된 파이프라인 클릭
- 단계별 로그(Install → Lint → Format check → Type check → Test)가 성공(Succeeded)인지 확인

9. 자동 트리거 확인
- 로컬에서 아무 변경(예: README 공백 추가) → git push origin main
- Runs에 새 실행이 자동으로 생성되는지 확인
</code></pre><p><mark>cf)</mark></p><ul><li><p>만약 GitHub 권한 에러가 나면?</p><ul><li>좌측 하단 Project settings → Service connections → New service connection → GitHub → Grant access(또는 OAuth) → 연결 생성</li><li>다시 Pipelines → Create pipeline부터 진행</li></ul></li><li><p>이미 리포에 있어야 하는 파일 예시</p><ul><li>azure-pipelines.yml (다중 파이썬 버전 매트릭스)</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>trigger</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>include</span>: [ <span style=color:#ae81ff>main, develop, staging ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>pool</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>vmImage</span>: <span style=color:#e6db74>&#39;ubuntu-latest&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>strategy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>matrix</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>py39</span>: { <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.9&#39;</span> }
</span></span><span style=display:flex><span>    <span style=color:#f92672>py310</span>: { <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.10&#39;</span> }
</span></span><span style=display:flex><span>    <span style=color:#f92672>py311</span>: { <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.11&#39;</span> }
</span></span><span style=display:flex><span>    <span style=color:#f92672>py312</span>: { <span style=color:#f92672>PY</span>: <span style=color:#e6db74>&#39;3.12&#39;</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>  - <span style=color:#f92672>task</span>: <span style=color:#ae81ff>UsePythonVersion@0</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>inputs</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>versionSpec</span>: <span style=color:#e6db74>&#39;$(PY)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      python -m pip install -U pip
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      pip install -r requirements-dev.txt</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Install dev deps</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>ruff check src tests</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Lint (ruff)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>ruff format --check src tests</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Format check</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>mypy src</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Type check</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>script</span>: <span style=color:#ae81ff>pytest -q</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>displayName</span>: <span style=color:#ae81ff>Test (pytest)</span>
</span></span></code></pre></div><h1><a class=anchor href=#>#</a></h1></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments><script src=https://giscus.app/client.js data-repo=yshghid/yshghid.github.io data-repo-id=R_kgDONkMkNg data-category-id=DIC_kwDONkMkNs4CloJh data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ko crossorigin=anonymous async></script></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#실습>실습</a></li><li></li><li><a href=#1-파이썬-프로젝트-스캐폴딩--메이크파일린팅테스트--포매팅>1. 파이썬 프로젝트 스캐폴딩 + 메이크파일/린팅/테스트 + 포매팅</a></li><li></li><li><a href=#2-여러-파이썬-버전으로-github-actions-테스트>2. 여러 파이썬 버전으로 GitHub Actions 테스트</a></li><li></li><li><a href=#3-클라우드-네이티브-빌드-서버로-ci>3. 클라우드 네이티브 빌드 서버로 CI</a></li><li></li><li></li></ul></li></ul></nav></div></aside></main></body></html>